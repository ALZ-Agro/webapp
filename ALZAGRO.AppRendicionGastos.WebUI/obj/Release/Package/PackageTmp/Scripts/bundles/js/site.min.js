!function(){"use strict";angular.module("abm-module",[])}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l,c,u,d,m,p,f){function g(e){return e?moment(e).format("DD/MM/YYYY HH:mm"):"N/A"}function h(){return{orderBy:"-UpdatedDateTime",partialDescription:"",page:1,size:10,userId:0,startDate:e.startDate,endDate:e.endDate}}function v(){r.$broadcast("mvztable-refresh-to-page",1)}function y(){t.post("api/exportData/report/statusChange",e.config,function(e){p.get(e.data.url,{responseType:"arraybuffer"}).then(function(t){var n=new c([t.data],{type:"text/csv"});l.saveAs(n,e.data.url.substr(e.data.url.lastIndexOf("/")+1))})},function(e){d.serverError(e,"No se pudo generar el archivo de reporte de cambios de estado.")})}e.tableLimitOptions=[10,25,50,100,200,500],e.startDate=moment().subtract(1,"month").toDate(),e.endDate=moment().toDate(),e.config=h(),e.users=[{id:0,fullName:"Todos"}],e.endDateOptions={maxDate:moment().toDate(),minDate:angular.copy(e.startDate)},e.startDateOptions={minDate:moment().subtract(20,"years").toDate(),maxDate:angular.copy(e.endDate)},e.$on("ContextChanged",function(e,t){n.go("triangular.home-admin")}),e.getParams=function(){return e.config},e.startDateSelected=function(t){if(t){var n=moment(t).toDate();e.config.startDate=n,e.endDateOptions.minDate=n,v()}},e.endDateSelected=function(t){if(t){var n=moment(t).toDate();e.config.endDate=n,e.startDateOptions.maxDate=n,v()}},e.cleanFilters=function(){e.config=h(),v()},e.generateReport=y,e.refreshView=v,e.columns=[{headerName:"Vendedor",name:"expenseUploaderFullName",orderBy:"User.FirstName",textCenter:!0,sortable:!0,alignCenter:!0},{headerName:"Fecha de modificación",name:"updatedDateTime",applyFilter:g,orderBy:"UpdatedDateTime",textCenter:!0,sortable:!0,alignCenter:!0},{headerName:"Modificado por",name:"userName",orderBy:"User.FirstName",sortable:!1,textCenter:!0,alignCenter:!0},{headerName:"Cambio",name:"change",orderBy:"Change",sortable:!1,textCenter:!0,alignCenter:!0},{headerName:"Motivo",name:"reasonOfChange",orderBy:"ReasonOfChange",sortable:!1,textCenter:!0,alignCenter:!0},{headerName:"Nota",name:"notes",orderBy:"Notes",sortable:!1,textCenter:!0,alignCenter:!0}],function(){var n={params:{page:1,size:-1,partialDescription:"",roleId:2}};t.get("api/users/search",n,function(t){e.users=_.concat(e.users,_.orderBy(t.data.results,["FirstName","ASC"]))},function(e){d.displayError("No se pudo obtener el listado de vendedores.")})}()}angular.module("abm-module").controller("StatusChangeReport",e),e.$inject=["$scope","apiService","$state","$stateParams","$rootScope","$q","sweetAlert","listService","FileSaver","Blob","expenseService","notificationService","$window","$http","$mdDialog"]}(),function(){"use strict";function e(e,t,n,a,r,o,i){function s(){n.displaySuccess("Categoría actualizada con éxito."),e.cancel()}i.$broadcast("hideCustomContext",!0),e.showToFieldOptions=[{id:0,description:"Todos"},{id:1,description:"Genérico"},{id:2,description:"No genérico"}],e.save=function(){if((new o).checkFormValidity(e.form)){var n=Object.assign({},e.category);t.post("/api/category",n,s)}},e.cancel=function(){r.go("triangular.category-list")},function(){a.id&&t.get("api/category/"+a.id,null,function(t){e.category=t.data},function(t){n.serverError(t,"No se pudo obtener la categoría."),e.cancel()})}()}angular.module("abm-module").controller("CategoryEditCtrl",e),e.$inject=["$scope","apiService","notificationService","$stateParams","$state","ValidationService","$rootScope"]}(),function(){"use strict";function e(e,t,n){function a(e){return e||"-"}function r(e){return e||"Todos"}function o(e,t){}e.tableLimitOptions=[10,25,50,100,200,500],e.config={partialDescription:"",page:1,size:10,orderBy:"Id"},e.getParams=function(){return e.config},e.columns=[{headerName:"Id",name:"id",customClass:"first-column-padding",orderBy:"Id"},{headerName:"Descripción",name:"description",orderBy:"Description"},{headerName:"Usuario",name:"fullName",parentRoot:"user",orderBy:"User.FirstName",applyFilter:r},{headerName:"Id del usuario",name:"userId",orderBy:"User.Id",applyFilter:a}],e.actions=[],e.onLink=o,e.$on("ContextChanged",function(e,n){t.go("triangular.home-admin")});var i=setInterval(function(){n.$broadcast("hideCustomContext",!0)},10);e.$on("hideCustomContextCompleted",function(){clearInterval(i)}),e.add=function(){t.go("triangular.payment-edit")}}angular.module("abm-module").controller("PaymentListCtrl",e),e.$inject=["$scope","$state","$rootScope"]}(),function(){"use strict";function e(e,t,n,a){function r(e){return e||"N/A"}function o(e){switch(e){case 0:return"Todos";case 1:return"Genérico";case 2:return"No genérico";default:return"Error"}}function i(e,t){}e.tableLimitOptions=[10,25,50,100,200,500],e.config={partialDescription:"",page:1,size:10,orderBy:"Id"},e.getParams=function(){return e.config},e.columns=[{headerName:"Id",name:"id",customClass:"first-column-padding",orderBy:"Id"},{headerName:"Descripción",name:"description",orderBy:"Description"},{headerName:"Mostrar con proveedor",name:"showTo",applyFilter:o,orderBy:"ShowTo"},{headerName:"Código",name:"code",applyFilter:r}],e.actions=[],e.onLink=i,e.$on("ContextChanged",function(e,t){n.go("triangular.home-admin")});var s=setInterval(function(){a.$broadcast("hideCustomContext",!0)},10);e.$on("hideCustomContextCompleted",function(){clearInterval(s)}),e.add=function(){n.go("triangular.category-edit")}}angular.module("abm-module").controller("CategoryListCtrl",e),e.$inject=["$scope","apiService","$state","$rootScope"]}(),function(){"use strict";function e(e,t,n,a,r,o,i,s){function l(){n.displaySuccess("Forma de pago actualizada con éxito."),e.cancel()}i.$broadcast("hideCustomContext",!0);a.id&&a.id;e.save=function(){if((new o).checkFormValidity(e.form)){var n=Object.assign({},e.payment);null==n.user?s.swal({title:"Guardar tipo de pago",text:"Al parecer no asignaste esta forma de pago a ningún usuario, por lo que quedará liberada para ser usada por todos. ¿Estás seguro de continuar?",type:"error",showCancelButton:!0,confirmButtonText:"ACEPTAR",confirmButtonColor:"",cancelButtonColor:"",confirmButtonClass:"color-green md-button md-alz-content-theme md-ink-ripple",cancelButtonClass:"md-button md-alz-content-theme md-ink-ripple cancel-color-text",cancelButtonText:"CANCELAR",width:"400px",padding:"90px"}).then(function(){n.userId=null,t.post("/api/payments",n,l)}).catch(function(e){}):(n.userId=n.user.id,t.post("/api/payments",n,l))}},e.cancel=function(){r.go("triangular.payment-list")},function(){a.id&&t.get("api/payments/"+a.id,null,function(t){e.payment=t.data},function(t){n.serverError(t,"No se pudo obtener el tipo de pago."),e.cancel()})}()}angular.module("abm-module").controller("PaymentEditCtrl",e),e.$inject=["$scope","apiService","notificationService","$stateParams","$state","ValidationService","$rootScope","sweetAlert"]}(),function(){"use strict";angular.module("triangular.layouts",[])}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l){function c(){"icon"===s.layout.sideMenuSize&&(o.find(".triangular-sidenav-left").addClass("hover"),n(function(){i.dispatchEvent(new Event("resize"))},300))}function u(t){var i=o.find(".triangular-content");"@triangular"===t&&angular.isDefined(s.layout.footerTemplateUrl)&&a(s.layout.footerTemplateUrl).then(function(t){var a=r(t),o=a(e);n(function(){i.append(o)})})}function d(e,t){v.showLoader=t}function m(){l.setLoaderActive(!0)}function p(){"icon"===s.layout.sideMenuSize&&(o.find(".triangular-sidenav-left").removeClass("hover"),n(function(){i.dispatchEvent(new Event("resize"))},300))}function f(e,t){h.push(t)}function g(e,t){angular.isDefined(s.layout.footer)&&!0===s.layout.footer&&u(t);var n=h.indexOf(t);-1!==n&&h.splice(n,1),0===h.length&&l.setLoaderActive(!1)}var h=[],v=this;v.activateHover=c,v.removeHover=p,v.showLoader=l.isActive(),e.layout=s.layout,e.$on("loader",d),e.$on("$stateChangeStart",m),e.$on("$viewContentLoading",f),e.$on("$viewContentLoaded",g)}e.$inject=["$scope","$rootScope","$timeout","$templateRequest","$compile","$element","$window","triLayout","triLoaderService"],angular.module("triangular.layouts").controller("TriangularStateController",e)}(),function(){"use strict";function e(e,t,n,a,r,o){function i(){n.displaySuccess("Configuración actualizada con éxito."),o.configParams=e.config,sessionStorage.setItem("configParams",JSON.stringify(e.config))}var s=setInterval(function(){o.$broadcast("hideCustomContext",!0)},10);e.$on("hideCustomContextCompleted",function(){clearInterval(s)}),e.$on("ContextChanged",function(e,t){a.go("triangular.home-admin")}),e.save=function(){if((new r).checkFormValidity(e.form)){var n=Object.assign({},e.config);t.post("/api/config",n,i)}},e.cancel=function(){a.go("triangular.home-admin")},function(){t.get("api/config/",null,function(t){e.config=t.data},function(t){n.serverError(t,"No se pudieron obtener los parámetros de configuración."),e.cancel()})}()}angular.module("abm-module").controller("ConfigCtrl",e),e.$inject=["$scope","apiService","notificationService","$state","ValidationService","$rootScope"]}(),function(){"use strict";angular.module("users-module",[])}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l){function c(e){n.displaySuccess("Perfil actualizado con éxito."),a(function(){i.path("/users/list")},100)}e.user={},e.editions=[],e.editionsIds=[],e.selectedEditions=[];o.repository.loggedUser;e.save=function(){(new s).checkFormValidity(e.form)&&t.post("/api/users/updateProfile",e.user,c)},e.cancel=function(){r.go("triangular.users-list")}}angular.module("users-module").controller("UsersProfileCtrl",e),e.$inject=["$scope","apiService","notificationService","$timeout","$state","$rootScope","$location","ValidationService","membershipService"]}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l,c,u){function d(e){c.removeCredentials(),o.go("triangular.account.login"),n.displaySuccess("La contraseña se ha modificado con éxito.")}e.user=l.repository.loggedUser,e.entity={},e.entity.userId=e.user.userId,e.save=function(){(new s).checkFormValidity(e.form)&&t.post("/api/users/changePassword",e.entity,d)}}angular.module("users-module").controller("UsersPasswordCtrl",e),e.$inject=["$scope","apiService","notificationService","$timeout","$stateParams","$state","$http","ValidationService","$rootScope","membershipService","$location"]}(),function(){"use strict";function e(e,t,n,a,r,o,i){function s(){e.taxes=[{id:"G",description:"Gravado"},{id:"N",description:"No Gravado"}]}function l(){e.userGroups=[],t.get("api/users/groups",null,function(t){angular.forEach(t.data,function(t){angular.forEach(e.companies,function(n){e.userGroups.push({id:t.id+n.id,description:t.description+" "+n.name,code:t.code+n.id})})})},function(){n.displayError("No se pudieron obtener los sectores.")})}function c(){var a=o.defer();return e.companies=[],t.get("api/company",null,function(t){e.companies=t.data,a.resolve()},function(){n.displayError("No se pudieron obtener las empresas ni los grupos de venta."),a.reject()}),a.promise}function u(){e.categories=[],t.get("api/category/all",null,function(t){e.categories=t.data},function(){n.displayError("No se pudieron obtener las categorías.")})}function d(){e.payments=[{id:"E",description:"Efectivo"},{id:"T",description:"Tarjeta"}]}i().waitFor("panelConfigOne").then(function(e){e.expand()});var m=setInterval(function(){r.$broadcast("hideCustomContext",!0)},10);e.$on("hideCustomContextCompleted",function(){clearInterval(m)}),e.$on("ContextChanged",function(e,t){a.go("triangular.home-admin")}),e.cancel=function(){a.go("triangular.home-admin")},e.search={category2:null},e.categories=[],e.taxes=[],e.companies=[],e.getValue=function(e){return e||"-"},function(){c().then(function(){l()}).catch(angular.noop),s(),u(),d()}()}angular.module("abm-module").controller("CodeSearchCtrl",e),e.$inject=["$scope","apiService","notificationService","$state","$rootScope","$q","$mdExpansionPanel"]}(),function(){"use strict";function e(e,t,n,a,r,o){function i(e){switch(e){case 1:return"Administrativo";case 2:return"Usuario";case 3:return"Administrador del sistema";default:return"N/A"}}function s(e){e.isLocked=!e.isLocked,t.post("api/users/updateProfile",e,function(t){var n=e.isLocked?"desbloqueado":"bloqueado";r.displaySuccess(e.email+" "+n+" con éxito."),a.$broadcast("refresh")},function(t){e.isLocked=!e.isLocked,r.displayError("No se pudo bloquear a "+e.firstName+" "+e.lastName+"."+t.data.message?" Error: "+t.data.message:"")})}function l(e){return e?moment(e).format("DD/MM/YYYY HH:mm"):"N/A"}function c(e){return e&&"0"!==e?e:"N/A"}function u(e,t){}e.tableLimitOptions=[10,25,50,100,{label:"Todos",value:function(){return 0}}],e.config={params:{partialDescription:"",page:1,size:10,orderBy:"Id"}},e.getParams=function(){return e.config},e.columns=[{headerName:"Usuario",name:"username",customClass:"first-column-padding"},{headerName:"Código",name:"id_Erp",applyFilter:c},{headerName:"Empresa",name:"userCompanyGroupsPlain",itemTitleName:"company",isArray:!0,sortable:!1,noItemMessage:"N/A"},{headerName:"Grupo de ventas",name:"userCompanyGroupsPlain",itemTitleName:"companyGroup",isArray:!0,sortable:!1,customClass:"no-minimize",noItemMessage:"N/A"},{headerName:"E-mail",name:"email"},{headerName:"Nombre",name:"firstName"},{headerName:"Apellido",name:"lastName"},{headerName:"Tipo de usuario",name:"roleId",applyFilter:i},{headerName:"Última fecha conexión",name:"lastActivityDateTime",applyFilter:l,customClass:"text-center"},{headerName:"Bloqueo de acceso",name:"isLocked",alignCenter:!0,isBoolean:!0,customCallback:s}],e.actions=[],e.onLink=u,e.$on("ContextChanged",function(e,t){n.go("triangular.home-admin")}),a.$broadcast("hideCustomContext",!0),e.add=function(){n.go("triangular.users-edit")},e.importCSV=function(){var n=angular.element(document.body);o.show({controller:"ImportDialogController",templateUrl:"../Scripts/app/views/provider/import/import.tmpl.html",parent:n,locals:{filesToRead:2},clickOutsideToClose:!0}).then(function(n){r.displayInfo("Cargando archivo...");var a=[],o=[];if(n.data.forEach(function(t){var n=t["Condición ante AFIP"],r={id:0,syncedWithERP:!0,cuit:t.CUIT,email:t["Correo electrónico"],phoneNumber:t["Teléfono"],contactFullName:t["Nombre de contacto"],legalName:t["Nombre Legal"],legalCondition:n?_.head(_.filter(e.legalConditions,["description",n])):null};n&&r.legalCondition?a.push(r):o.push(t)}),o.length>0){r.displayError("No se "+(1==o.length?"pudo":"pudieron")+" importar "+(1==o.length?"un proveedor":o.length+" proveedores")+" de la lista.");var i={header:!0,newline:"\r\n",delimiter:",",quotes:!1},s=Papa.unparse(o,i),l=new Blob([s],{type:"text/csv"});FileSaver.saveAs(l,"Proveedores_rechazados_"+moment().format("DD_MM_YYYY HHmmss")+".txt")}a.length>0&&(r.displayInfo("Guardando proveedores..."),t.post("api/provider/import",a,function(e){if(1==a.length&&e.data.errors.length==a.length)r.displayError("No se pudo importar el proveedor.");else if(r.displaySuccess((1==a.length?"Proveedor importado":a.length-e.data.errors.length>1?"Proveedor importado":" proveedores importados")+" con éxito."),e.data.errors.length){r.displayError(1==e.data.errors.length?"Un proveedor":e.data.errors.length+" proveedores no pudieron ser importados.");var t={header:!0,delimiter:","},n=Papa.unparse(e.data.errors,t),o=new Blob([n],{type:"text/csv;charset=utf-8;"});FileSaver.saveAs(o,"Proveedores_rechazados_por_servidor_"+moment().format("DD_MM_YYYY HHmmss")+".txt")}},function(e){}))}).catch(function(e){e&&r.displayError(e)})}}angular.module("users-module").controller("UsersListCtrl",e),e.$inject=["$scope","apiService","$state","$rootScope","notificationService","$mdDialog"]}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l,c){function u(t){var n=_.head(_.filter(e.userGroups,["id",t]));e.user.userCompanyGroups.filter(function(e){e.userGroup.id===t&&(e.userGroup=n)})}function d(t){var n=_.head(_.filter(e.companyOptions,["id",t]));e.user.userCompanyGroups.filter(function(e){e.company.id===t&&(e.company=n)}),e.companies=_.remove(e.companies,function(e){return e.id!=t})}function m(){g&&t.get("/api/users/get/"+g,null,function(t){t.data.password=null,t.data.id_Erp&&"0"!==t.data.id_Erp||(t.data.id_Erp=null),e.user=t.data,e.user.role=e.user.role.id,e.user.userCompanyGroups.forEach(function(t){e.removeCompanyOption(t.company.id)})})}function p(t){n.displaySuccess("El usuario "+e.user.email+" se ha guardado con éxito."),a(function(){o.go("triangular.users-list")},100)}function f(t){n.displaySuccess("La contraseña del usuario "+e.user.email+" se ha reseteado con éxito."),a(function(){o.go("triangular.users-list")},100)}e.user={userCompanyGroups:[]},e.userRoleOptions=[],e.userGroups=[],e.companies=[],l.$broadcast("hideCustomContext",!0);var g=r.id?r.id:0;e.isEditing=0!=g,e.save=function(){if((new s).checkFormValidity(e.form)){var n=Object.assign({},e.user);n.role=_.head(_.filter(e.userRoleOptions,["id",e.user.role])),n.roleId=n.role.id,t.post("/api/users/",n,p)}},e.addNewUserCompanyGroup=function(){var t={id:0,userId:e.user.id,company:{},userGroup:{}};e.user.userCompanyGroups.push(t)},e.removeUserCompany=function(t,n){e.user.userCompanyGroups.splice(n,1),e.addCompanyOption(t.company.id)},e.cancel=function(){o.go("triangular.users-list")},e.resetPassword=function(){t.post("/api/users/resetPassword",e.user,f)},e.addCompanyOption=function(t){var n=_.head(_.filter(e.companyOptions,["id",t]));e.companies.push(n),e.companies=_.orderBy(e.companies,["id"],["asc"])},e.removeCompanyOption=d,e.onGroupSelected=u,e.hasSelectedUserRole=function(){return!(!e.userRoleOptions||0===e.userRoleOptions.length||!e.user.role)&&"Usuario"===e.userRoleOptions.filter(function(t){return t.id===e.user.role})[0].description},function(){var a=[];c.defer();return a.push(c(function(a,r){t.get("api/users/roles",null,function(t){e.userRoleOptions=t.data,a()},function(e){n.serverError(e,"No se pudieron obtener los roles."),r()})})),a.push(c(function(a,r){t.get("api/users/groups",null,function(t){e.userGroups=t.data,a()},function(e){n.serverError(e,"No se pudieron obtener los grupos de usuario."),r()})})),a.push(c(function(a,r){t.get("api/company",null,function(t){e.companies=t.data,e.companyOptions=[],angular.copy(t.data,e.companyOptions),a()},function(e){n.serverError(e,"No se pudieron obtener los grupos de usuario."),r()})})),c.all(a)}().then(function(){m()}).catch(function(){o.go("triangular.users-list")})}angular.module("users-module").controller("UsersEditCtrl",e),e.$inject=["$scope","apiService","notificationService","$timeout","$stateParams","$state","$http","ValidationService","$rootScope","$q"]}(),function(){"use strict";angular.module("requests-module",[])}(),function(){"use strict";function e(e,t,n,a){var r=a.id?a.id:0;e.columns=[{headerName:"Usuario",name:"username",customClass:"first-column-padding"},{headerName:"Descripción",name:"description"},{headerName:"Fecha de Consulta",name:"updatedDateTime",isDate:!0},{headerName:"Fecha de Accidente",name:"accidentDate",isDate:!0},{headerName:"Fecha de Convenio",name:"agreementDate",isDate:!0},{headerName:"Indemnización",name:"compensation",isDecimal:!0},{headerName:"Apu",name:"apu",isDecimal:!0},{headerName:"Adicional",name:"aditional",isDecimal:!0}];var o=new Date;e.advancedDateFilters={dateFrom:{label:"Fecha desde",name:"dateFrom",model:new Date(o.getFullYear(),o.getMonth()-2,o.getDate()),param:"dateFrom"},dateUntil:{label:"Fecha hasta",name:"dateUntil",model:o,param:"dateUntil"}},e.getParams=function(){return{userId:r,dateFrom:e.advancedDateFilters.dateFrom.model,dateUntil:e.advancedDateFilters.dateUntil.model}},e.goBack=function(){n.go("triangular.users-list")}}angular.module("requests-module").controller("RequestsListCtrl",e),e.$inject=["$scope","apiService","$state","$stateParams"]}(),function(){"use strict";angular.module("provider-module",[])}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l,c,u,d,m,p,f){function g(e){return e&&"NULL"!=e?e:"N/A"}function h(e){return e?moment(e).format("DD/MM/YYYY HH:mm"):"N/A"}function v(e){return e?"SI":"NO"}function y(e,t,a,r){"view-detail"==e&&n.go("triangular.provider-details",{id:t.id,data:t})}function b(){var e=o.defer();return i.swal({title:"Exportar proveedores",text:"Serán exportados todos los proveedores visualizados en la tabla. Éstos luego quedarán habilitados para todos los usuarios de la aplicación.",imageUrl:"Content/images/popup_download.png",showCancelButton:!0,confirmButtonText:"Exportar",confirmButtonColor:"",cancelButtonColor:"",confirmButtonClass:"color-green md-button md-alz-content-theme md-ink-ripple",cancelButtonClass:"md-button md-alz-content-theme md-ink-ripple cancel-color-text",cancelButtonText:"CANCELAR",width:"400px",input:"text",inputPlaceholder:"Nombre del archivo",inputAttributes:{maxlength:30,autocapitalize:"off",autocorrect:"off"},padding:"90px"}).then(function(t){e.resolve(t)}).catch(function(t){e.reject()}),e.promise}function C(n){var a=o.defer();return b().then(function(n){(angular.isUndefined(n)||""==n)&&(n="Listado_de_proveedores"),e.config.fileName=n;var o=Object.assign({},e.config);t.post("api/exportData/providers",o,function(t){p.get(t.data.url,{responseType:"arraybuffer"}).then(function(t){var n=new c([t.data],{type:"text/csv"});l.saveAs(n,e.config.fileName?e.config.fileName+".csv":"Listado_de_proveedores-"+moment().format("DD-MM-YYYY-HH:mm")+".csv"),r.$broadcast("refresh"),a.resolve()})},function(e){d.serverError(e,"No se pudo generar el archivo de exportación de proveedores."),a.reject()})}).catch(function(){a.reject()}),a.promise}function S(e,t){try{return _.head(_.filter(_.at(e,t),function(e){return!!e}))}catch(e){return null}}function x(){return{getForBackOffice:!0,partialDescription:"",page:1,size:10,orderBy:"Id",OverrideExportCheck:!0,startDate:e.startDate,endDate:e.endDate,userId:0,exportStatus:0}}function $(){r.$broadcast("mvztable-refresh-to-page",1)}function w(){t.post("api/exportData/report/providers",e.config,function(e){p.get(e.data.url,{responseType:"arraybuffer"}).then(function(t){var n=new c([t.data],{type:"text/csv"});l.saveAs(n,e.data.url.substr(e.data.url.lastIndexOf("/")+1))})},function(e){d.serverError(e,"No se pudo generar el archivo de reporte de nuevos proveedores.")})}e.legalConditions=[],e.tableLimitOptions=[10,25,50,100,200,500],e.exportedOptionns=[{id:0,description:"Todos"},{id:1,description:"Exportados"},{id:2,description:"Sin exportar"}],e.startDate=moment().subtract(1,"month").toDate(),e.endDate=moment().toDate(),e.config=x(),e.users=[{id:0,fullName:"Todos"}],e.endDateOptions={maxDate:moment().toDate(),minDate:angular.copy(e.startDate)},e.startDateOptions={minDate:moment().subtract(20,"years").toDate(),maxDate:angular.copy(e.endDate)},e.$on("ContextChanged",function(e,t){n.go("triangular.home-admin")}),e.getParams=function(){return e.config},e.startDateSelected=function(t){if(t){var n=moment(t).toDate();e.config.startDate=n,e.endDateOptions.minDate=n,$()}},e.endDateSelected=function(t){if(t){var n=moment(t).toDate();e.config.endDate=n,e.startDateOptions.maxDate=n,$()}},e.cleanFilters=function(){e.config=x(),$()},e.generateReport=w,e.refreshView=$,e.columns=[{headerName:"Vendedor",name:"userFullName",orderBy:"User.FirstName",sortable:!0,textCenter:!0,alignCenter:!0,applyFilter:g},{headerName:"Fecha",name:"updatedDateTime",orderBy:"UpdatedDateTime",applyFilter:h,sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Nombre o Razón Social",name:"legalName",sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"CUIT",name:"cuit",sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Condición ante AFIP",name:"description",parentRoot:"legalCondition",orderBy:"LegalCondition.Description",sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Nombre del Contacto",name:"contactFullName",orderBy:"ContactFullName",applyFilter:g,sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Exportado",name:"syncedWithERP",applyFilter:v,sortable:!1,textCenter:!0,alignCenter:!0}],e.actions=[{isDisabled:function(){return!1},applyValidation:function(e){return!0},title:"",tooltip:"Ver detalle",icon:"zmdi zmdi-account-box",name:"view-detail",classes:"color-blue font-size-2"}],e.actionCallback=y,e.customButtons=[{visible:!0,iconOnly:!0,callback:C,label:"Exportar proveedores",icon:"cloud-download",customIconClass:"color-blue font-size-2",customClass:"table-toolbar-label margin-0 padding-0 md-icon-button",isDisabled:function(e){return e.length>0||0==r.mvzTableData.length}}],e.importCSV=function(){var n=angular.element(document.body);f.show({controller:"ImportDialogController",templateUrl:"../Scripts/app/views/provider/import/import.tmpl.html",parent:n,clickOutsideToClose:!0}).then(function(n){d.displayInfo("Cargando archivo...");var a=[],r=[],i=new RegExp(/[^\x20-\x7E]+/g);if(n.data.forEach(function(t){if(Object.keys(t).length>1){Object.keys(t).forEach(function(e,n){i.test(e)&&(t[e.replace(i,"")]=t[e],delete t[e])});var n=t["Condición ante AFIP"]||t["Condicin ante AFIP"]||t["Condicion ante AFIP"]||t["condicion ante afip"],o={id:0,syncedWithERP:!0,cuit:S(t,["CUIT","cuit","Cuit"]),email:S(t,["Correo electrónico","Correo electronico","Correo electrnico"]),phoneNumber:S(t,["Teléfono","Telefono","Telfono"]),contactFullName:S(t,["Nombre de contacto","Nombre de Contacto","Nombre De Contacto","nombre de contacto"]),legalName:S(t,["Nombre Legal","nombre legal","Nombre legal"]),legalCondition:n?_.head(_.filter(e.legalConditions,["description",n])):null};n&&o.legalCondition&&o.legalName&&"0"!=o.legalName?a.push(o):o.legalName?(t.Error="No se pudo encontrar una condición ante el AFIP válida para este proveedor.",r.push(t)):(t.Error="Debés ingresar un nombre legal para este registro.",r.push(t))}}),r.length>0){d.displayError("No se "+(1==r.length?"pudo":"pudieron")+" importar "+(1==r.length?"un proveedor":r.length+" proveedores")+" de la lista.");var s={header:!0,newline:"\r\n",delimiter:",",quotes:!1},u=Papa.unparse(r,s),m=new c([u],{type:"text/csv"});l.saveAs(m,"Proveedores_rechazados_"+moment().format("DD_MM_YYYY HHmmss")+".csv")}if(a.length>0){d.displayInfo("Guardando proveedores...");var p=[],f=[];return _.chunk(a,100).forEach(function(e){var n=o.defer();f.push(n.promise),t.post("api/provider/import",e,function(e){e.data.errors.length>0&&(p=p.concat(e.data.errors)),n.resolve()},function(t){e.forEach(function(e){e.Error="Error al importar este proveedor. Por favor verifique sus datos cargados."}),p=p.concat(e),n.resolve()})}),o.all(f).then(function(){if(1==a.length&&p.length==a.length)d.displayError("No se pudo importar el proveedor.");else{var e=a.length-p.length;d.displaySuccess((1==a.length?"Proveedor importado":1===e?"Proveedor importado":e+" proveedores importados")+" con éxito."),p.length>0&&d.displayError(1==p.length?"Un proveedor no pudo ser importado":p.length+" proveedores no pudieron ser importados.")}if(p.length>0){var t={header:!0,delimiter:","},n=_.map(p,function(e){return{"Nombre de contacto":e.contactFullName,CUIT:e.cuit,"Correo electrónico":e.email,"Nombre Legal":e.legalName,Telefono:e.phoneNumber,"Condición ante AFIP":e.legalCondition,Error:e.error}}),r=Papa.unparse(n,t),o=new c([r],{type:"text/csv;charset=utf-8;"});l.saveAs(o,"Proveedores_rechazados_por_servidor_"+moment().format("DD_MM_YYYY HHmmss")+".csv")}}).catch(function(){})}}).catch(function(e){e&&d.displayError(e)})};var D=setInterval(function(){e.config.size<100&&r.$broadcast("refresh")},1e3*(r.contextConfig.syncIntervalInSeconds?r.contextConfig.syncIntervalInSeconds:300));e.$on("$destroy",function(){clearInterval(D)}),function(){t.get("api/legalCondition",null,function(t){e.legalConditions=t.data},function(e){d.displayError("No se pudieron obtener las categorías de IVA.")});var n={params:{page:1,size:-1,partialDescription:"",roleId:2}};t.get("api/users/search",n,function(t){e.users=_.concat(e.users,_.orderBy(t.data.results,["FirstName","ASC"]))},function(e){d.displayError("No se pudo obtener el listado de vendedores.")})}()}angular.module("provider-module").controller("ProviderListCtrl",e),e.$inject=["$scope","apiService","$state","$stateParams","$rootScope","$q","sweetAlert","listService","FileSaver","Blob","expenseService","notificationService","$window","$http","$mdDialog"]}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l){function c(e){var t=new FileReader;t.onload=function(e){var t=e.target.result,a=XLSX.read(t,{type:"binary"}),o=a.SheetNames[0],i=XLSX.utils.sheet_to_json(a.Sheets[o]);i.length>0?n.hide({data:i,fileName:u}):r.displayError("Ocurrió un error al leer el archivo o este no posee datos cargados")},t.onerror=function(e){},t.readAsBinaryString(e)}var u="";e.status="idle",e.url="",e.files=[],e.from="file",e.onSourceChanged=function(t){e.from=t},e.onXlsRead=c,e.readFile=function(t){e.status="uploading";var a=t[0].name.substr(t[0].name.lastIndexOf(".")+1,t[0].name.length);if(a)switch(a=a.toLowerCase()){case"csv":var o={header:!0,dynamicTyping:!0,encoding:"ISO-8859-1"};u=t[0].name,s.parse(t[0],o).then(function(t){e.status="idle",n.hide({data:t.data,fileName:u})}).catch(function(t){e.status="idle",r.displayError("Ocurrió un error al leer el archivo o este no posee datos cargados")});break;default:u=t[0].name,c(t[0])}else r.displayError("La URL no pertenece a un archivo o este no tiene un formato adecuado para la importación")},e.onError=function(e){r.displayError("Ocurrió un error al leer el archivo.")},e.cancel=function(){n.cancel()}}angular.module("provider-module").controller("ImportDialogController",e),e.$inject=["$scope","$rootScope","$mdDialog","apiService","notificationService","$http","$sce","Papa","Blob"]}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l){function c(){var t=_.indexOf(l.mvzTableData,_.head(_.filter(l.mvzTableData,["id",Number(a.id)])));t>0?(e.previusProvider=l.mvzTableData[t-1]?l.mvzTableData[t-1]:null,e.nextProvider=l.mvzTableData[t+1]?l.mvzTableData[t+1]:null):(e.previusProvider=null,e.nextProvider=null)}e.provider={},e.nextProvider=null,e.previusProvider=null,e.goBack=function(){n.go("triangular.provider-list")},e.goToNextProvider=function(){e.nextProvider&&(n.go("triangular.provider-details",{id:e.nextProvider.id,data:e.nextProvider}),e.nextProvider=null)},e.goToPreviusProvider=function(){e.previusProvider&&(n.go("triangular.provider-details",{id:e.previusProvider.id,data:e.previusProvider}),e.previusProvider=null)},e.$on("onKeyDown",function(t,n){switch(n){case 39:e.goToNextProvider();break;case 37:e.goToPreviusProvider()}}),e.getFormattedCUIT=function(){if(e.provider){if(null!=e.provider.cuit&&""!=e.provider.cuit){var t=String(e.provider.cuit);return t.substr(0,2)+" "+t.substr(2,10)+" "+t.substr(10,11)}return""}return""},e.getFormattedPhone=function(){if(e.provider){if(""!=e.provider.phoneNumber&&null!=e.provider.phoneNumber){var t=String(e.provider.phoneNumber);return"("+(t.length>10?t.substr(0,4):t.substr(0,3))+") "+(t.length>10?t.substr(4,8):t.substr(3,7))+" "+(t.length>10?t.substr(8,t.length):t.substr(7,t.length))}return""}return""},function(){var t=r.defer();a.id&&a.data?(c(),e.provider=a.data,t.resolve()):(n.go("triangular.provider-list"),t.reject()),t.promise}()}angular.module("provider-module").controller("ProviderDetailsCtrl",e),e.$inject=["$scope","apiService","$state","$stateParams","$q","$window","expenseService","notificationService","$rootScope"]}(),function(){"use strict";angular.module("home-module",[])}(),function(){"use strict";function e(e,t,n,a,r,o){function i(i){e.byVendor.data.rows=[],e.byVendorIsReady=!1,e.totalChartReady=!1;var l={params:{startDate:moment(e.startDate).toISOString(),endDate:moment(e.endDate).toISOString(),companyId:i||n.currentSelectedCompany,page:1,size:-1,partialDescription:"",orderBy:"Date",userId:0}},c=r.defer();t.get("api/expense/analytics",l,function(t){e.totalChart={type:"PieChart",displayed:!0,data:{cols:[{id:"t",label:"Categorias",type:"string"},{id:"s",label:"generado",type:"number"}],rows:[{c:[{v:"Sin datos"},{v:100}]}]},options:{title:"Total",isStacked:"true",fill:20,forceRedrawCount:0,forceRedrawNow:!0,titleTextStyle:{fontSize:"30",textPosition:"out",
fontName:"Ubuntu",bold:!1},chartArea:s,legend:{position:"bottom",maxLines:4},displayExactValues:!0,colors:["#7BA529","#F3C330","#AF4D42","#AF9442"]},formatters:{}},t.data.totalFuel||t.data.totalHotel||t.data.totalFood||t.data.totalOther?e.totalChart.data.rows=[{c:[{v:"Combustible"},{v:t.data.totalFuel}]},{c:[{v:"Alojamiento"},{v:t.data.totalHotel}]},{c:[{v:"Comida"},{v:t.data.totalFood}]},{c:[{v:"Otros"},{v:t.data.totalOther}]}]:(e.totalChart.data.rows=[{c:[{v:"Sin datos"},{v:100}]}],e.totalChart.options.colors=["#A1A1A1"]),e.totals.food=t.data.totalFood,e.totals.hotels=t.data.totalHotel,e.totals.fuel=t.data.totalFuel,e.totals.other=t.data.totalOther,t.data.vendors&&t.data.vendors.forEach(function(t){var n=o("currency")(t.totalFuel,"$",2),a=o("currency")(t.totalHotel,"$",2),r=o("currency")(t.totalFood,"$",2),i=o("currency")(t.totalOther,"$",2);e.byVendor.data.rows.push({c:[{v:t.fullName},{f:n,v:t.totalFuel},{f:a,v:t.totalHotel},{f:r,v:t.totalFood},{f:i,v:t.totalOther}]})}),e.byVendor.options.redrawTrigger++,e.byVendorIsReady=!0,e.totalChartReady=!0;var a=0,r=setInterval(function(){var e=document.getElementById("byVendorChartId"),t=document.getElementById("totalChartId"),o=!!e&&e.children[0],i=!!t&&t.children[0],s=o&&o.children[0]&&o.children[0].children.length>0,l=i&&i.children[0]&&i.children[0].children.length>0;s&&l?a<5?(n.$broadcast("resizeMsg"),a++):(n.$broadcast("resizeMsg"),clearInterval(r)):n.$broadcast("resizeMsg")},40);c.resolve()},function(e){a.displayError(e),c.reject()})}e.byVendorIsReady=!1,e.totalChartReady=!1,e.loggedUser=n.repository.loggedUser,e.totals={fuel:0,food:0,hotels:0,other:0},e.startDate=moment().subtract(1,"month").toDate(),e.endDate=moment().toDate(),e.$on("ContextChanged",function(e,t){i(t)}),e.endDateOptions={maxDate:moment().toDate(),minDate:angular.copy(e.startDate)},e.startDateOptions={minDate:moment().subtract(20,"years").toDate(),maxDate:angular.copy(e.endDate)},e.startDateSelected=function(t){if(t){var n=moment(t).toDate();e.config.params.startDate=n,e.endDateOptions.minDate=n,e.filterBy()}},e.endDateSelected=function(t){if(t){var n=moment(t).toDate();e.config.params.endDate=n,e.startDateOptions.maxDate=n,e.filterBy()}},e.filterBy=function(e){i()},e.chartIsReady=function(e){console.log(e)};var s={left:"50",top:"50",width:"90%"};e.byVendor={type:"ColumnChart",displayed:!1,data:{cols:[{id:"vend",label:"Vendedor",type:"string",p:{}},{id:"comb-id",label:"Combustible",type:"number",p:{}},{id:"aloj-id",label:"Alojamiento",type:"number",p:{}},{id:"com-id",label:"Comida",type:"number",p:{}},{id:"otr-id",label:"Otros",type:"number",p:{}},{id:"tooltip",role:"tooltip",type:"string",p:{role:"tooltip",html:!0}}],rows:[]},options:{colors:["#7BA529","#F3C330","#AF4D42","#AF9442"],forceRedrawNow:!0,redrawTrigger:0,title:"Por vendedor",titleTextStyle:{fontSize:"30",textPosition:"out",fontName:"Ubuntu",bold:!1},explorer:{axis:"horizontal",keepInBounds:!0},chartArea:s,legend:{position:"bottom",maxLines:4},displayExactValues:!0,axisTitlesPosition:"out",isStacked:"percent",fill:20,vAxis:{gridlines:{count:10},format:"###.##%",minValue:0,viewWindow:{min:0}},tooltip:{isHtml:!0}},formatters:{},view:{}},i();setInterval(function(){i()},1e3*(n.contextConfig.syncIntervalInSeconds?n.contextConfig.syncIntervalInSeconds:300))}angular.module("home-module").controller("AdminHomeCtrl",e),e.$inject=["$scope","apiService","$rootScope","notificationService","$q","$filter"]}(),function(){"use strict";angular.module("expenses-module",[])}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l,c){function u(e,t){for(var n=""+t.replace(/-/g,""),a="",r=0,o=0;r<e.length&&o<n.length;r++)a+="X"==e.charAt(r)?n.charAt(o++):e.charAt(r);return a}function d(){return e.expense.receipt?u("XXXX-XXXXXXXX",e.expense.receipt):"N/A"}function m(e){return i.formatFloat(e)}function p(){e.expense.receipt=e.expense.receipt.length<2?"":e.expense.receipt,e.receiptIsDisabled="Varios"===e.expense.category.description&&"SIN IVA"==e.expense.aliquot.description}function f(){var t=[],n={id:e.expense.id,syncStatus:e.expense.syncStatus.description,date:e.expense.date,provider:e.expense.provider.legalName,paymentType:e.expense.aliquot.description,payment:e.expense.payment.description,category:e.expense.category.description,total:e.expense.total,exported:e.expense.exported,paymentId:e.expense.payment.id,user:e.expense.user};return n.user.fullName=n.user.firstName+" "+n.user.lastName,t.push(n),t}function g(t){if(l.mvzTableData){var n=_.indexOf(l.mvzTableData,_.head(_.filter(l.mvzTableData,["id",Number(a.id)])));n>-1&&(l.mvzTableData[n].syncStatus=t)}e.expense.syncStatus=t}function h(){if(e.enteredViaNotifications)e.previusExpense=null,e.nextExpense=null;else{var t=_.indexOf(l.mvzTableData,_.head(_.filter(l.mvzTableData,["id",Number(a.id)])));e.indexOfCurrentExpense=t,e.previusExpense=l.mvzTableData[t-1]?l.mvzTableData[t-1]:null,e.nextExpense=l.mvzTableData[t+1]?l.mvzTableData[t+1]:null}}function v(){var n=r.defer();S.push(n.promise),t.get("api/payments/of/"+e.expense.userId,null,function(t){e.payments=t.data,n.resolve()},function(e){x.push(e.data.message),n.reject()})}function y(){var n=r.defer();S.push(n.promise),t.get("api/aliquot",null,function(t){e.aliquots=t.data,n.resolve()},function(e){x.push(e.data.message),n.reject()})}function b(){var n=r.defer();S.push(n.promise),t.get("api/category/all",null,function(t){e.categories=t.data,n.resolve()},function(e){x.push(e.data.message),n.reject()})}function C(){return y(),b(),v(),r.all(S)}e.hasPrivilege=l.repository&&l.repository.loggedUser&&"Usuario"!=l.repository.loggedUser.role,e.canEdit=!1,e.receiptIsDisabled=!1;var S=[];e.forms={};var x=[];e.rotation=0,e.rotateIcon=function(t){"left"==t?e.rotation-=90:e.rotation+=90,e.rotation<0&&(e.rotation=360),e.rotation>360&&(e.rotation=0)},e.dateoptions={maxDate:new Date,minDate:moment().subtract(1,"y").toDate()},e.payments=[],e.categories=[],e.aliquots=[],e.isEdit=a.isEdit,e.expense={},e.images=[],e.previusExpense=null,e.nextExpense=null,e.methods={},e.methodsModal={},e.$on("image-opened",function(t,n){var a={index:0},r=document.querySelectorAll(".pswp")[0];new PhotoSwipe(r,PhotoSwipeUI_Default,e.images,a).init()}),e.getFormattedReceipt=d,e.getValueOfFloat=m,e.switchEdit=function(){if(e.isEdit)if(e.forms.expenseForm.$valid){s.displayInfo("Guardando gasto...");var n=l.syncStatuses.filter(function(e){return"Pendiente"==e.description})[0],a=Object.assign({},e.expense);a.syncStatus=n,t.post("api/expense",a,function(t){g(n),s.displaySuccess("Gasto guardado con éxito."),e.isEdit=!1,p()},function(e){s.serverError(e,"No se pudo guardar el gasto.")})}else s.displayError("El formulario se encuentra con errores.");else{var r={id:e.expense.id,syncStatus:_.head(_.filter(l.syncStatuses,["description","Editando"])),changeStatusReason:"Editar errores de carga.",changeStatusNote:"N/A"};t.post("api/expense/changeStatus",r,function(t){if(t.data.success){e.expense.date=moment(e.expense.date).toDate();g(l.syncStatuses.filter(function(e){return"Editando"==e.description})[0]),p(),e.isEdit=!0}},function(t){e.isEdit=!1,s.serverError(t,"No se pudo tomar el gasto para editarlo.")})}},e.enteredViaNotifications=a.enteredViaNotifications,e.goToNextExpense=function(){e.nextExpense&&(n.go("triangular.expense-details",{id:e.nextExpense.id,data:e.nextExpense,enteredViaNotifications:!1}),e.nextExpense=null)},e.goToPreviusExpense=function(){e.previusExpense&&(n.go("triangular.expense-details",{id:e.previusExpense.id,data:e.previusExpense,enteredViaNotifications:!1}),e.previusExpense=null)},e.reject=function(){var t=l.syncStatuses.filter(function(e){return"Rechazado"==e.description})[0],n=f();i.reject(n[0]).then(function(){e.enteredViaNotifications?e.goBack():g(t)}).catch(function(){s.serverError(error,"No se pudo rechazar el gasto.")})},e.approve=function(){var t=l.syncStatuses.filter(function(e){return"Aprobado"==e.description})[0];if("Rechazado"===e.expense.syncStatus.description){var n=f();i.openApproveModal(n).then(function(n){i.approve(e.expense,n).then(function(){e.enteredViaNotifications?e.goBack():g(t)}).catch(function(){s.serverError(error,"No se pudo aprobar el gasto.")})}).catch(function(){})}else i.approve(e.expense).then(function(){e.enteredViaNotifications?e.goBack():g(t)}).catch(function(){s.serverError(error,"No se pudo aprobar el gasto.")})},e.goBack=function(){n.go("triangular.expenses-list")},e.getFormattedDate=function(){return e.expense?moment(e.expense.date).format("DD/MM/YYYY"):""},e.viewExpenseStatusesLog=function(t){c.show({controller:"ExpenseStatusChangeLogCtrl",controllerAs:"vm",templateUrl:"../Scripts/app/views/expenses/statuschangelog/statuschange-log.tmpl.html",parent:angular.element(document.body),targetEvent:t,locals:{expenseId:e.expense.id},clickOutsideToClose:!0,fullscreen:!0}).then(function(e){console.log("EXIT")},function(){console.log("CANCEL EXIT")})},e.onProviderSelected=function(t){t&&(e.expense.provider=t)},e.onCategoryChanged=function(e){},e.onFloatNumberChanged=function(t,n,a){if(t){"$"===t[0]&&(t=t.substr(2));var r=i.formatFloat(t,!1,a);e.expense[n]=r}},e.completeAllDigits=function(t,n){e.onFloatNumberChanged(t,n,2)},e.onDateChange=function(t){var n=null;t&&("object"==typeof t&&(n=moment(t)),"string"==typeof t&&(n=moment(t,"DD/MM/YYYY")),n.isAfter(moment())?(s.displayError("No podés elegir una fecha posterior al día de hoy."),e.expense.date=moment().toDate()):e.expense.date=n.toDate())},e.onAliquotSelected=function(e){},e.onPaymentSelected=function(t){t&&(e.expense.payment=_.head(_.filter(e.payments,["id",t])))},e.onReceiptChanged=function(t){var n="XXXX-XXXXXXXX";t=t.replace(/-/g,"").substr(0,n.length-1);var a=u(n,t),r=setInterval(function(){e.expense.receipt!=a?e.expense.receipt=a:clearInterval(r)},10)},function(){var i=r.defer();return a.id?(a.data&&h(),t.get("api/expense/"+a.id,null,function(t){if(null==t.data)s.displayError("No se ha encontrado el gasto al que intentas acceder."),n.go("triangular.expenses-list"),i.reject();else{e.expense=t.data,e.actionsEnabled=e.hasPrivilege&&"Editando"!=e.expense.syncStatus.description&&!e.expense.exported,e.hasPrivilege=e.hasPrivilege&&!e.expense.exported,e.canEdit=e.hasPrivilege&&(e.expense.updatedBy===l.repository.loggedUser.userId||"Pendiente"===e.expense.syncStatus.description),e.$broadcast("ContextChanged",e.expense.companyId);var a="http://localhost:1487"===o.location.origin?"https://alzagroapp.mvzn.me":o.location.origin;t.data.images.length>0&&t.data.images.forEach(function(t){var t={src:a+"/"+t.path,w:1024,h:768,id:t.id,url:a+"/"+t.path};e.images.push(t)}),e.canEdit&&"Editando"==e.expense.syncStatus.description&&(e.expense.date=moment(e.expense.date).toDate(),e.isEdit=!0,p()),i.resolve()}},function(e){i.reject(),n.go("triangular.expenses-list")})):(n.go("triangular.expenses-list"),i.reject()),i.promise}().then(function(){C()}).catch(function(){}),i.getSyncStatuses()}angular.module("expenses-module").controller("ExpenseDetailsController",e),e.$inject=["$scope","apiService","$state","$stateParams","$q","$window","expenseService","notificationService","$rootScope","$mdDialog"]}(),function(){"use strict";angular.module("payments-module",[])}(),function(){"use strict";function e(e,t,n,a){e.tableLimitOptions=[10,25,50,100,200,500];var r=a.id?a.id:0;e.columns=[{headerName:"Usuario",name:"username",customClass:"first-column-padding"},{headerName:"Fecha de Pago",name:"updatedDateTime",isDate:!0},{headerName:"Descripción",name:"description"},{headerName:"Monto",name:"amount"}];var o=new Date;e.advancedDateFilters={dateFrom:{label:"Fecha desde",name:"dateFrom",model:new Date(o.getFullYear(),o.getMonth()-2,o.getDate()),param:"dateFrom"},dateUntil:{label:"Fecha hasta",name:"dateUntil",model:o,param:"dateUntil"}},e.getParams=function(){return{userId:r,dateFrom:e.advancedDateFilters.dateFrom.model,dateUntil:e.advancedDateFilters.dateUntil.model}},e.goBack=function(){n.go("triangular.users-list")}}angular.module("payments-module").controller("PaymentsListCtrl",e),e.$inject=["$scope","apiService","$state","$stateParams"]}(),function(){"use strict";angular.module("account-module",[])}(),function(){"use strict";function e(e,t,n,a,r,o,i,s){function l(){t.go("triangular.account.login")}function c(){(new i).checkFormValidity(e.forgot)&&n.post("/api/account/forgot",d.user,u)}function u(e){a.displaySuccess("Tu nueva clave ha sido enviada por correo electrónico."),r(function(){t.go("triangular.account.login")},100)}var d=this;d.triSettings=s,d.user={email:""},d.resetClick=c,d.login=l}angular.module("account-module").controller("ForgotCtrl",e),e.$inject=["$scope","$state","apiService","notificationService","$timeout","$stateParams","ValidationService","triSettings"]}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l,c,u,d){function m(){return{params:{companyId:Number(a.currentSelectedCompany),startDate:moment().subtract(1,"month").startOf("day").add(1,"minute").toDate(),endDate:moment().endOf("day").subtract(1,"minute").toDate(),partialDescription:"",page:1,size:10,paymentId:0,syncStatusId:0,userId:0,categoryId:0,orderBy:"-Date",getForBackEnd:!0,exported:0}}}function p(){var t=m();e.startDate=t.params.startDate,e.endDate=t.params.endDate,e.config=t}function f(e){return e?l.formatFloat(e):"N/A"}function g(e){return e?"SI":"NO"}function h(e,t){if(t){if("approve"==t.name)return"Aprobado"==e.syncStatus||"Editando"==e.syncStatus;if("reject"==t.name)return"Rechazado"==e.syncStatus||"Editando"==e.syncStatus}return!1}function v(){localStorage.setItem("expense-list-config",JSON.stringify(e.config)),a.$broadcast("refresh"),e.subTotal=0}function y(e){var t="color-white padding-10 width-table-status text-center ";switch(e.syncStatus){case"Pendiente":t+="background-orange";break;case"Rechazado":t+="background-red";break;case"Aprobado":t+="background-green";break;case"Duplicado":t+="background-grey";break;case"Editando":t+="background-lightblue"}return t}function b(e){var t=[];return e.forEach(function(e){var n=r.defer();t.push(n.promise),l.changeStatus(e,"Aprobado").then(function(){n.resolve()}).catch(function(){n.reject()})}),r.all(t)}function C(e){var t=r.defer(),n=[],a=r.defer();return n.push(a.promise),e&&e.length>0?l.openRejectModal(e).then(function(t){e.forEach(function(e){var o=r.defer();n.push(o.promise),l.changeStatus(e,"Rechazado",t).then(function(){try{a.resolve()}catch(e){}o.resolve()}).catch(function(){o.reject()})})}).catch(function(e){n.push(r.reject()),a.reject()}):(n.push(r.reject()),a.reject()),r.all(n).then(function(){t.resolve()}).catch(function(){t.reject()})}function S(){var e=r.defer();return o.swal({title:"Exportar gastos",imageUrl:"Content/images/popup_download.png",showCancelButton:!0,confirmButtonText:"Exportar",confirmButtonColor:"",cancelButtonColor:"",confirmButtonClass:"color-green md-button md-alz-content-theme md-ink-ripple",cancelButtonClass:"md-button md-alz-content-theme md-ink-ripple cancel-color-text",cancelButtonText:"CANCELAR",width:"400px",padding:"90px",html:'<div class="swal2-content" style="display: block;">Serán exportados los gastos presentes en la tabla que hayan sido aprobados y que no hayan sido exportados previamente.</div>'}).then(function(t){e.resolve()}).catch(function(t){e.reject()}),e.promise}function x(n){var a=r.defer();return S().then(function(){t.post("api/exportData/expenses",e.config.params,function(e){e.data.error_providers_path&&u.get(e.data.error_providers_path,{responseType:"arraybuffer"}).then(function(t){var n=new s([t.data],{type:"text/csv"});i.saveAs(n,e.data.error_providers_path.substr(e.data.error_providers_path.lastIndexOf("/")+1))}),o.swal({title:"Resultados",type:"info",confirmButtonText:"Aceptar",showCancelButton:!1,width:"400px",padding:"90px",html:'<h5 class="text-left margin-bottom-0 padding-left-30">Registros exportados con éxito: '+e.data.exported+'.</h5><h5 class="text-left margin-bottom-0 padding-left-30">Registros que no pudieron ser exportados: '+e.data.not_exported+'.</h5><h5 class="text-left margin-bottom-0 padding-left-30">Proveedores no encontrados: '+e.data.inexistent_providers+".</h5>"}).then(function(){a.resolve()}).catch(function(){a.resolve()})},function(e){c.serverError(e,"No se pudo generar el archivo de exportación de gastos."),a.reject()})}).catch(function(e){a.reject()}),a.promise}function $(t){e.config.params.companyId=t,e.config.params.size=10,e.config.params.page=1,e.config.params.paymentId=0,e.config.params.userId=0,v()}function w(){var n=r.defer();a.syncStatuses=[],z.push(n.promise),t.get("api/syncStatus",null,function(t){var r=_.orderBy(t.data.filter(function(e){return"Nuevo"!=e.description}),["description"],["asc"]);a.syncStatuses=e.syncStatuses.concat(r),e.syncStatuses=e.syncStatuses.concat(r),n.resolve()},function(e){n.reject()})}function D(){var n=r.defer();return a.refusalReasons=[],t.get("api/changeReason/refusalReasons",null,function(t){a.refusalReasons=t.data,e.refusalReasons=t.data,n.resolve()},function(e){c.displayError(e.data.message),n.reject()}),n.promise}function E(){var n=r.defer();return a.refusalReasons=[],t.get("api/changeReason/approvalReasons",null,function(t){a.approvalReasons=t.data,e.approvalReasons=t.data,n.resolve()},function(e){c.displayError(e.data.message),n.reject()}),n.promise}function N(){var n=r.defer();z.push(n.promise),t.get("api/payments/ofCurrentUser",null,function(t){e.payments=e.payments.concat(t.data)},function(e){c.displayError("Error de conexión al obtener el listado de formas de pago. Intente nuevamente en unos segundos."),n.reject()})}function A(){var n={params:{userName:"",page:1,size:1e4,partialDescription:"",orderBy:"Description",userId:0}};t.get("api/payments/search",n,function(t){e.payments=e.payments.concat(t.data.results)},function(e){c.displayError("Error de conexión al obtener el listado de formas de pago. Intente nuevamente en unos segundos.")})}function P(){t.get("api/expense/getExpenseUsersByCompanyId/"+a.currentSelectedCompany,null,function(t){e.users=e.users.concat(t.data)},function(e){c.displayError("Error de conexión al obtener el listado de vendedores. Intente nuevamente en unos segundos.")})}function T(){t.get("api/category/all",null,function(t){e.categories=t.data,e.categories.unshift({id:0,description:"Todas"})},function(e){c.displayError("Error de conexión al obtener el listado de categorias. Intente nuevamente en unos segundos.")})}e.loggedUser=a.repository.loggedUser;var U=localStorage.getItem("expense-list-config");if(U){var k=JSON.parse(U);k.params.startDate?(k.params.startDate=moment(k.params.startDate).toDate(),k.params.endDate?k.params.endDate=moment(k.params.endDate).toDate():k.params.endDate=moment().toDate()):k.params.endDate?(k.params.startDate=moment(k.params.endDate).subtract(1,"month").toDate(),k.params.endDate=moment(k.params.endDate).toDate()):(e.startDate=moment().subtract(1,"month").toDate(),e.endDate=moment().toDate()),k.params.endDate=moment(k.params.endDate).toDate(),e.config=k,e.config.params.companyId=Number(a.currentSelectedCompany),e.startDate=k.params.startDate,e.endDate=k.params.endDate}else p(),localStorage.setItem("expense-list-config",JSON.stringify(e.config));var F=!0;e.payments=[{id:0,description:"Todos"}];var z=[];e.users=[{id:0,fullName:"Todos"}],e.tableLimitOptions=[10,25,50,100,200,500],e.syncStatuses=[{id:0,description:"Todos"}],e.exportedOptionns=[{id:0,description:"Todos"},{id:1,description:"Exportados"},{id:2,description:"Sin exportar"}],e.$on("pageHasChanged",function(e){F=!1}),e.$on("subTotalChanged",function(t,n){e.subTotal=n}),e.$on("ContextChanged",function(t,n){F=!0,e.users=_.remove(e.users,function(e){return 0==e.id}),p(),localStorage.setItem("expense-list-config",null),e.payments=_.remove(e.payments,function(e){return 0==e.id}),"Usuario"!=a.repository.loggedUser.role?(A(),P()):N(),$(n)}),e.endDateOptions={maxDate:moment().toDate(),minDate:angular.copy(e.startDate)},e.startDateOptions={minDate:moment().subtract(20,"years").toDate(),maxDate:angular.copy(e.endDate)},e.startDateSelected=function(t){if(t){var n=moment(t).toDate();e.config.params.startDate=n,e.endDateOptions.minDate=n,v()}},e.endDateSelected=function(t){if(t){var n=moment(t).toDate();e.config.params.endDate=n,e.startDateOptions.maxDate=n,v()}},e.getParams=function(){return e.config.params},e.cleanFilters=function(){p(),v()},e.generateReport=function(){t.post("api/exportData/report/expenses",e.config.params,function(e){u.get(e.data.url,{responseType:"arraybuffer"}).then(function(t){var n=new s([t.data],{type:"text/csv"});i.saveAs(n,e.data.url.substr(e.data.url.lastIndexOf("/")+1))})},function(e){c.serverError(e,"No se pudo generar el archivo de reporte de gastos.")})},e.userIsAdminOrHigher=e.loggedUser&&("Administrativo"==e.loggedUser.role||"Administrador del sistema"==e.loggedUser.role);var I=[{headerName:"Estado",name:"syncStatus",orderBy:"SyncStatus.Description",getClass:y,textCenter:!0,sortable:!0,alignCenter:!0},{headerName:"Gasto ID",name:"id",sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Fecha",name:"date",isDate:!0,sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Vendedor",parentRoot:"user",name:"fullName",orderBy:"User.FirstName",sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Grupo",name:"group",sortable:!0,textCenter:!0,alignCenter:!0,visible:e.userIsAdminOrHigher},{headerName:e.userIsAdminOrHigher?"Proveedor Desc":"Proveedor",name:"provider",orderBy:"Provider.LegalName",sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Tipo",name:"paymentType",orderBy:"Aliquot.Description",sortable:!0,textCenter:!0,alignCenter:!0,visible:!e.userIsAdminOrHigher},{headerName:"Pago",name:"payment",orderBy:"Payment.Description",sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Categoría",name:"category",orderBy:"Category.Description",sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Total",name:"total",applyFilter:f,sortable:!0,textCenter:!0,alignCenter:!0},{headerName:"Exportado",name:"exported",applyFilter:g,sortable:!0,textCenter:!0,class:"text-center",visible:e.userIsAdminOrHigher}];e.columns=_.filter(I,function(e){return angular.isUndefined(e.visible)||e.visible}),e.actions=[],"Usuario"!=a.repository.loggedUser.role&&("Administrador del sistema"==a.repository.loggedUser.role&&e.actions.push({isDisabled:function(e){return"Editando"!=e.syncStatus},applyValidation:function(e){return!0},title:"",tooltip:"Desbloquear",icon:"zmdi zmdi-lock-open",name:"unlock",classes:"color-blue"}),e.actions.push({isDisabled:h,applyValidation:function(e){return!0},title:"",tooltip:"Aprobar",icon:"alz-check-circle",name:"approve",classes:"color-green"},{isDisabled:h,applyValidation:function(e){return!0},title:"",tooltip:"Rechazar",icon:"alz-cancel-circle",name:"reject",classes:"color-red"}),e.customToolbar=[{visible:!0,callback:b,label:"Aprobar seleccionados",icon:"check-circle",customIconClass:"color-green font-size-2",customClass:"table-toolbar-label",isDisabled:function(e){return 0==e.length||_.filter(e,function(e){return e.exported}).length>0}},{visible:!0,callback:C,label:"Rechazar seleccionados",icon:"cancel-circle",customIconClass:"color-red font-size-2",customClass:"table-toolbar-label",isDisabled:function(e){return 0==e.length||_.filter(e,function(e){return e.exported}).length>0}},{visible:!0,callback:x,label:"Exportar gastos",icon:"cloud-download",customIconClass:"color-blue font-size-2",customClass:"table-toolbar-label",isDisabled:function(e){return e.length>0}}]),e.actions.push({isDisabled:function(){return!1},applyValidation:function(e){return!0},title:"",tooltip:"Ver detalle",icon:"zmdi zmdi-assignment-o",name:"view-detail",classes:"color-blue"}),e.actionCallback=function(r,o,i,s){if("approve"==r)if("Rechazado"===o.syncStatus){var u=[];u.push(o),l.openApproveModal(u).then(function(e){l.approve(o,e).then(function(){v()}).catch(function(){})}).catch(function(){})}else l.approve(o).then(function(){v()}).catch(function(){});if("reject"==r&&l.reject(o).then(function(){v()}).catch(function(){}),"view-detail"==r&&(localStorage.setItem("expense-list-config",JSON.stringify(e.config)),n.go("triangular.expense-details",{id:o.id,data:o})),"unlock"==r){c.displayInfo("Desbloqueando gasto...");var d={id:o.id,syncStatus:_.head(_.filter(a.syncStatuses,["description","Pendiente"])),changeStatusReason:"Desbloquear gasto del estado de edición.",changeStatusNote:"N/A"};t.post("api/expense/changeStatus",d,function(e){e.data.success&&(c.displaySuccess("Gasto desbloqueado con éxito."),v())},function(e){c.serverError(e,"No se pudo desbloquear el gasto.")})}},e.filterBy=function(t){null!=t&&void 0!=t&&(localStorage.setItem("expense-list-config",JSON.stringify(e.config)),v())},function(){w(),T(),"Usuario"!=a.repository.loggedUser.role?(D(),E(),A(),P()):N(),r.all(z)}();setInterval(function(){if(a.mvzTableData){_.filter(a.mvzTableData,["selected",!0]).length>0||v()}else v()},1e3*(a.contextConfig.syncIntervalInSeconds?a.contextConfig.syncIntervalInSeconds:300))}angular.module("expenses-module").controller("ExpensesListCtrl",e),e.$inject=["$scope","apiService","$state","$rootScope","$q","sweetAlert","FileSaver","Blob","expenseService","notificationService","$http","$stateParams"]}(),function(){"use strict";function e(e,t,n){function a(e){return e?moment(e).format("DD/MM/YYYY HH:mm"):"N/A"}e.columns=[{headerName:"Fecha de modificación",name:"updatedDateTime",applyFilter:a,orderBy:"UpdatedDateTime",textCenter:!0,sortable:!0,alignCenter:!0},{headerName:"Modificado por",name:"userName",orderBy:"User.FirstName",sortable:!1,textCenter:!0,alignCenter:!0},{headerName:"Cambio",name:"change",orderBy:"Change",sortable:!1,textCenter:!0,alignCenter:!0},{headerName:"Motivo",name:"reasonOfChange",orderBy:"ReasonOfChange",sortable:!1,textCenter:!0,alignCenter:!0},{headerName:"Nota",name:"notes",orderBy:"Notes",sortable:!1,textCenter:!0,alignCenter:!0}],e.cancel=function(){t.hide()},e.config={expenseId:n,orderBy:"-UpdatedDateTime",partialDescription:"",page:1,size:5},e.getParams=function(){return e.config},e.tableLimitOptions=[5,10,25,{label:"Todos",value:function(){return 0}}]}e.$inject=["$scope","$mdDialog","expenseId"],angular.module("expenses-module").controller("ExpenseStatusChangeLogCtrl",e)}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l,c){function u(){(new s).checkFormValidity(e.login)&&!h&&(h=!0,t.login(f.user,m,d),setTimeout(function(){h=!1},2e3))}function d(e){n.displayError(response.data),h=!1}function m(e){if(h=!1,e.data.success){if(f.user.email=e.data.email,f.user.userId=e.data.userId,f.user.role=e.data.role,f.user.fullName=e.data.firstName+" "+e.data.lastName,f.user.enabledCompanies=e.data.enabledCompanies,f.user.showNotifications=e.data.showNotifications,f.user.enabledCompanies&&f.user.enabledCompanies.length>0){var r=_.map(f.user.enabledCompanies,function(e){return e.company});a.$broadcast("ContextChanged",r[0].id)}t.saveCredentials(f.user),l.post("api/users/updateLastActivityDateTime/"+e.data.userId,null,p),t.getConfigParams().then(function(){a.previousState&&"/"!=a.previousState&&"/login"!=a.previousState?$location.path(a.previousState):"Usuario"==f.user.role.description||"Administrativo"==f.user.role.description?(i.go("triangular.home-admin"),n.displaySuccess("Bienvenido "+e.data.firstName+" "+e.data.lastName)):"Administrador del sistema"==f.user.role.description?(i.go("triangular.users-list"),n.displaySuccess("Bienvenido "+e.data.firstName+" "+e.data.lastName)):i.go("401")})}else n.displayError(e.data.message)}function p(){}var f=this,g=t.getRememberedUser();f.user={email:g?g.email:"",password:g?g.password:"",userId:"",rememberMe:!!g&&g.rememberMe},f.loginClick=u,f.triSettings=r;var h=!1;f.login=function(e){13!=e.keyCode&&"Enter"!=e.key||h||f.loginClick()}}angular.module("account-module").controller("LoginCtrl",e),e.$inject=["$scope","membershipService","notificationService","$rootScope","triSettings","triRoute","$state","ValidationService","apiService","$q"]}(),function(){"use strict";function e(e,t,n,a,r){function o(){"icon"===r.layout.sideMenuSize&&(t.find(".admin-sidebar-left").addClass("hover"),n(function(){a.dispatchEvent(new Event("resize"))},300))}function i(){"icon"===r.layout.sideMenuSize&&(t.find(".admin-sidebar-left").removeClass("hover"),n(function(){a.dispatchEvent(new Event("resize"))},300))}e.layout=r.layout;var s=this;s.activateHover=o,s.removeHover=i}e.$inject=["$scope","$element","$timeout","$window","triLayout"],angular.module("triangular.layouts").controller("DefaultLayoutController",e)}(),function(){"use strict";function e(e,t,n,a){function r(e,r){function o(){r.scrollTop(0)}function i(){var o=r.find("#admin-panel-content-view");0===o.find("#footer").length&&n(a.layout.footerTemplateUrl).then(function(n){var a=t(n),r=a(e);o.append(r)})}e.$on("$stateChangeStart",o),e.$on("$viewContentLoaded",i)}return{link:r,replace:!0,restrict:"A"}}e.$inject=["$rootScope","$compile","$templateRequest","triLayout"],angular.module("triangular.layouts").directive("triDefaultContent",e)}(),function(){"use strict";angular.module("triangular.components",[])}(),function(){"use strict";function e(){return{bindToController:!0,controller:t,controllerAs:"triWizard",restrict:"A"}}function t(e,t){function n(e){return m[e]}function a(){d.currentStep=d.currentStep+1}function r(){var t=e.triWizard.getForm(d.currentStep),n=!0;return angular.isDefined(t)&&angular.isDefined(t.$invalid)&&(n=t.$invalid),n}function o(e){if(angular.isDefined(m[e]))return m[e].$valid}function i(){d.currentStep=d.currentStep-1}function s(){return 0===d.currentStep}function l(e){m.push(e)}function c(){var e=u();d.progress=Math.floor(e/p*100)}function u(){for(var e=0,t=m.length-1;t>=0;t--)angular.forEach(m[t],function(t){angular.isObject(t)&&t.hasOwnProperty("$modelValue")&&!0===t.$valid&&(e+=1)});return e}var d=this,m=[],p=0;d.currentStep=0,d.getForm=n,d.isFormValid=o,d.nextStep=a,d.nextStepDisabled=r,d.prevStep=i,d.prevStepDisabled=s,d.progress=0,d.registerForm=l,d.updateProgress=c,t(function(){for(var e=m.length-1;e>=0;e--)angular.forEach(m[e],function(e){angular.isObject(e)&&e.hasOwnProperty("$modelValue")&&(p+=1)});c()})}t.$inject=["$scope","$timeout"],angular.module("triangular.components").directive("triWizard",e)}(),function(){"use strict";function e(){function e(e,t,n,a){var r=a[0],o=a[1];o.registerForm(r),t.on("input",function(){o.updateProgress()})}return{require:["form","^triWizard"],link:e,restrict:"A"}}angular.module("triangular.components").directive("triWizardForm",e)}(),function(){"use strict";function e(e){function n(t,n,a){t.vm.widgetLayout="left"===a.titlePosition||"right"===a.titlePosition?"row":"column",t.vm.contentLayout=angular.isUndefined(a.contentLayout)?"column":a.contentLayout,t.vm.contentPadding=angular.isDefined(a.contentPadding),t.vm.contentLayoutAlign=angular.isUndefined(a.contentLayoutAlign)?"":a.contentLayoutAlign,t.vm.titleOrder="right"===a.titlePosition||"bottom"===a.titlePosition?2:1,t.vm.contentOrder="right"===a.titlePosition||"bottom"===a.titlePosition?1:2,t.vm.overlayTitle=!angular.isUndefined(a.overlayTitle)||void 0,e(n),angular.isDefined(a.class)&&n.addClass(a.class),angular.isDefined(a.backgroundImage)&&n.css("background-image","url("+a.backgroundImage+")"),t.menuClick=function(e){angular.isUndefined(t.menu.menuClick)&&t.menu.menuClick(e)},n.attr("title","")}return{restrict:"E",templateUrl:"app/triangular/components/widget/widget.tmpl.html",transclude:!0,replace:!0,scope:{title:"@",subtitle:"@",avatar:"@"},bindToController:!0,controller:t,controllerAs:"vm",link:n}}function t(){var e=this;e.menu=null,e.loading=!1,this.setMenu=function(t){e.menu=t},this.setLoading=function(t){e.loading=t}}e.$inject=["$mdTheming"],angular.module("triangular.components").directive("triWidget",e)}(),function(){"use strict";function e(e){function t(t,n,a){var r=[],o=null,i=!1;t.pageSize=angular.isUndefined(a.pageSize)?0:a.pageSize,t.page=angular.isUndefined(a.page)?0:a.page,angular.forEach(t.columns,function(e){e.sortable&&r.push(e.field)}),t.refresh=function(n){!0===n&&(t.page=0),t.contents=e("orderBy")(t.contents,o,i)},r.length>0&&(i=!1,
o=r[0],t.refresh()),t.sortClick=function(e){-1!==r.indexOf(e)&&(e===o&&(i=!i),o=e,t.refresh())},t.showSortOrder=function(e,t){return e===o&&i===t},t.headerClass=function(e){var t=[];return-1!==r.indexOf(e)&&t.push("sortable"),e===o&&t.push("sorted"),t},t.cellContents=function(t,n){return angular.isDefined(t.filter)?e(t.filter)(n[t.field]):n[t.field]},t.totalItems=function(){return t.contents.length},t.numberOfPages=function(){return Math.ceil(t.contents.length/t.pageSize)},t.pageStart=function(){return t.page*t.pageSize+1},t.pageEnd=function(){var e=(t.page+1)*t.pageSize;return e>t.contents.length&&(e=t.contents.length),e},t.goToPage=function(e){t.page=e}}return{restrict:"E",scope:{columns:"=",contents:"=",filters:"="},link:t,templateUrl:"app/triangular/components/table/table-directive.tmpl.html"}}e.$inject=["$filter"],angular.module("triangular.components").directive("triTable",e)}(),function(){"use strict";function e(){function e(e,t){if(e&&e.length>0)return t=+t,e.slice(t)}return e}angular.module("triangular.components").filter("startFrom",e)}(),function(){"use strict";function e(e){function t(t){return e.trustAsHtml("<div style=\"background-image: url('"+t+"')\"/>")}return t}e.$inject=["$sce"],angular.module("triangular.components").filter("tableImage",e)}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l,c,u,d,m,p,f){function g(e){s.debounce(function(){l(e).toggle()},300)()}function h(){return"hidden"!==f.layout.sideMenuSize&&a("gt-sm")}function v(e){n.$broadcast("triSwitchNotificationTab",e),b.openSideNav("notifications")}function y(){b.isFullScreen=!b.isFullScreen,b.fullScreenIcon=b.isFullScreen?"zmdi zmdi-fullscreen-exit":"zmdi zmdi-fullscreen";var e=d[0];e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen():e.documentElement.requestFullscreen?e.documentElement.requestFullscreen():e.documentElement.msRequestFullscreen?e.documentElement.msRequestFullscreen():e.documentElement.mozRequestFullScreen?e.documentElement.mozRequestFullScreen():e.documentElement.webkitRequestFullscreen&&e.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}var b=this;b.breadcrumbs=m.breadcrumbs,b.emailNew=!1,b.languages=p.languages,b.openSideNav=g,b.hideMenuButton=h,b.toggleNotificationsTab=v,b.isFullScreen=!1,b.fullScreenIcon="zmdi zmdi-fullscreen",b.toggleFullScreen=y}e.$inject=["$scope","$injector","$rootScope","$mdMedia","$state","$element","$filter","$mdUtil","$mdSidenav","$mdToast","$timeout","$document","triBreadcrumbsService","triSettings","triLayout"],angular.module("triangular.components").controller("DefaultToolbarController",e)}(),function(){"use strict";function e(e,t,n,a,r){function o(){a.go("triangular-no-scroll.email.inbox"),s.close()}function i(){n("notifications").close()}var s=this;s.close=i,s.currentTab=0,s.notificationGroups=[{name:"Twitter",notifications:[{title:"Mention from oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")},{title:"Oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")},{title:"Oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")},{title:"Followed by Oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")}]},{name:"Server",notifications:[{title:"Server Down",icon:"zmdi zmdi-alert-circle",iconColor:"rgb(244, 67, 54)",date:moment().startOf("hour")},{title:"Slow Response Time",icon:"zmdi zmdi-alert-triangle",iconColor:"rgb(255, 152, 0)",date:moment().startOf("hour")},{title:"Server Down",icon:"zmdi zmdi-alert-circle",iconColor:"rgb(244, 67, 54)",date:moment().startOf("hour")}]},{name:"Sales",notifications:[{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Lambda WordPress $60",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Lambda WordPress $60",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")}]}],s.openMail=o,s.settingsGroups=[{name:"Account Settings",settings:[{title:"Show my location",icon:"zmdi zmdi-pin",enabled:!0},{title:"Show my avatar",icon:"zmdi zmdi-face",enabled:!1},{title:"Send me notifications",icon:"zmdi zmdi-notifications-active",enabled:!0}]},{name:"Chat Settings",settings:[{title:"Show my username",icon:"zmdi zmdi-account",enabled:!0},{title:"Make my profile public",icon:"zmdi zmdi-account-box",enabled:!1},{title:"Allow cloud backups",icon:"zmdi zmdi-cloud-upload",enabled:!0}]}],s.statisticsGroups=[{name:"User Statistics",stats:[{title:"Storage Space (120/160 Gb)",mdClass:"md-primary",value:60},{title:"Bandwidth Usage (10/100 Gb)",mdClass:"md-accent",value:10},{title:"Memory Usage (1/8 Gb)",mdClass:"md-warn",value:100}]},{name:"Server Statistics",stats:[{title:"Storage Space (120/160 Gb)",mdClass:"md-primary",value:60},{title:"Bandwidth Usage (10/100 Gb)",mdClass:"md-accent",value:10},{title:"Memory Usage (1/8 Gb)",mdClass:"md-warn",value:100}]}],e.$on("triSwitchNotificationTab",function(e,t){s.currentTab=t}),t({method:"GET",url:r.url+"email/inbox"}).then(function(e){s.emails=e.data.slice(1,20)})}e.$inject=["$scope","$http","$mdSidenav","$state","API_CONFIG"],angular.module("triangular.components").controller("NotificationsPanelController",e)}(),function(){"use strict";function e(){function e(e){i.push(e)}function t(e){return r(i,e)}function n(e,t){o(i,e,t)}function a(){for(var e=i.length-1;e>=0;e--)i.splice(e,1)}function r(e,t){var n;if(e instanceof Array)for(var a=0;a<e.length;a++){if(e[a].id===t){n=e[a];break}if(angular.isDefined(e[a].children)&&(n=r(e[a].children,t),angular.isDefined(n)))break}return n}function o(e,t,n,a){if(e instanceof Array)for(var r=e.length-1;r>=0;r--){if(e[r].state===t&&angular.equals(e[r].params,n)){e.splice(r,1),isNaN(a)||i[a].children.length||i.splice(a,1);break}angular.isDefined(e[r].children)&&o(e[r].children,t,n,r)}}var i=[];this.addMenu=e,this.removeMenu=n,this.removeAllMenu=a,this.$get=function(){return{menu:i,addMenu:e,getMenu:t,removeMenu:n,removeAllMenu:a}}}angular.module("triangular.components").provider("triMenu",e)}(),function(){"use strict";function e(e,n,a){function r(e,t){n(t);var r=t.controller("mdTheme"),o=a.getThemeHue(r.$mdTheme,"primary","default"),i=a.rgba(o.value);t.css({"background-color":i}),t.children("md-content").css({"background-color":i})}return{restrict:"E",template:'<md-content><tri-menu-item permission permission-only="item.permission" ng-repeat="item in triMenuController.menu | orderBy:\'priority\'" item="::item"></tri-menu-item></md-content>',scope:{},controller:t,controllerAs:"triMenuController",link:r}}function t(e){this.menu=e.menu}e.$inject=["$location","$mdTheming","triTheming"],t.$inject=["triMenu"],angular.module("triangular.components").directive("triMenu",e)}(),function(){"use strict";function e(){return{restrict:"E",require:"^triMenu",scope:{item:"="},template:'<div ng-include="::triMenuItem.item.template"></div>',controller:t,controllerAs:"triMenuItem",bindToController:!0}}function t(e,t,n,a,r,o,i,s){function l(){m.item.active=a.includes(m.item.state,m.item.params),m.item.active&&(i.reset(),i.addCrumb(m.item),e.$emit("openParents"))}function c(){e.$parent.$parent.$broadcast("toggleDropdownMenu",m.item,!m.item.open)}function u(){p.$broadcast("ContextChanged",m.item.contextVariable),o.location.pathname.match(/\d+$/)&&a.go(m.item.state),m.item.active=p.currentSelectedCompany==m.item.contextVariable}function d(){try{clearInterval(refreshRatio)}catch(e){}if(angular.isDefined(m.item.click))t.invoke(m.item.click);else{var e=angular.isUndefined(m.item.params)?{}:m.item.params;if(angular.isDefined(m.item.openInNewTab)&&!0===m.item.openInNewTab){var r=a.href(m.item.state,e);o.open(r,"_blank")}else a.go(m.item.state,e);m.item.hideCustomContext?(p.$broadcast("hideCustomContext",!0),s.menu.forEach(function(e){e.active=!1})):(p.$broadcast("hideCustomContext",!1),s.menu.forEach(function(e){e.active=p.currentSelectedCompany==e.contextVariable}))}m.item.active=!0,n("left").close()}var m=this,p=t.get("$rootScope");switch(m.item.template="../Scripts/app/triangular/components/menu/menu-item-"+m.item.type+".tmpl.html",m.item.type){case"dropdown":m.item.children=r("orderBy")(m.item.children,"priority"),m.toggleDropdownMenu=c,e.$on("toggleDropdownMenu",function(e,t,n){m.item===t?m.item.open=n:m.item.open=!1}),e.$on("openParents",function(){m.item.open=!0,i.addCrumb(m.item)});break;case"link":m.item.contextVariable?(m.openLink=u,m.item.active=p.currentSelectedCompany==m.item.contextVariable):(m.openLink=d,l(a.current.name,a.params),e.$on("$stateChangeSuccess",function(e,t,n){l(t.name)}))}}t.$inject=["$scope","$injector","$mdSidenav","$state","$filter","$window","triBreadcrumbsService","triMenu"],angular.module("triangular.components").directive("triMenuItem",e)}(),function(){"use strict";function e(e,t){var n=this;n.name=e.name,n.copyright=e.copyright,n.layout=t.layout,n.version=e.version}e.$inject=["triSettings","triLayout"],angular.module("triangular.components").controller("FooterController",e)}(),function(){"use strict";function e(){return{bindToController:!0,controller:t,controllerAs:"vm",template:'<div flex class="loader padding-100" ng-show="vm.isActive()" layout="column" layout-fill layout-align="center center"><h3 class="md-headline">{{vm.triSettings.name}}</h3><md-progress-linear md-mode="indeterminate"></md-progress-linear></div>',restrict:"E",replace:!0,scope:{}}}function t(e,t,n){var a=this;a.triSettings=n,a.isActive=t.isActive}t.$inject=["$rootScope","triLoaderService","triSettings"],angular.module("triangular.components").directive("triLoader",e)}(),function(){"use strict";function e(e){function t(){return a}function n(t){a=t,e.$broadcast("loader",a)}var a=!1;return{isActive:t,setLoaderActive:n}}e.$inject=["$rootScope"],angular.module("triangular.components").factory("triLoaderService",e)}(),function(){"use strict";function e(e){function t(t){this.breadcrumbs.crumbs.unshift(t),e.$emit("changeTitle")}function n(){this.breadcrumbs.crumbs=[]}return{breadcrumbs:{crumbs:[]},addCrumb:t,reset:n}}e.$inject=["$rootScope"],angular.module("triangular.components").factory("triBreadcrumbsService",e)}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l,c,u,d,m,p,f,g){function h(){t.repository&&t.repository.loggedUser&&($.allowRefresh&&g.get("api/notifications/search",E,v,function(e){}),E.params.userId===t.repository.loggedUser.userId&&c(h,15e3))}function v(e){t.repository&&t.repository.loggedUser&&t.repository.loggedUser.email&&$.allowRefresh&&t.$broadcast("onNotificationRefresh",e.data)}function y(e){o.debounce(function(){i(e).toggle()},300)()}function b(){switch(i("notifications").isOpen()?$.allowRefresh=!1:$.allowRefresh=!0,p.layout.sideMenuSize){case"hidden":return!1;case"off":return!0;default:return n("gt-sm")}}function C(e){t.$broadcast("triSwitchNotificationTab",e),$.openSideNav("notifications")}function S(){$.isFullScreen=!$.isFullScreen,$.fullScreenIcon=$.isFullScreen?"zmdi zmdi-fullscreen-exit":"zmdi zmdi-fullscreen";var e=u[0];e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen():e.documentElement.requestFullscreen?e.documentElement.requestFullscreen():e.documentElement.msRequestFullscreen?e.documentElement.msRequestFullscreen():e.documentElement.mozRequestFullScreen?e.documentElement.mozRequestFullScreen():e.documentElement.webkitRequestFullscreen&&e.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function x(){f.removeCredentials(),l.go("triangular.account.login")}var $=this,w=localStorage.getItem("alzagro-repository");if(w){var D=JSON.parse(w);$.loggedUser=Object.keys(D.loggedUser).length>0}else $.loggedUser=!1;l&&"ProviderListCtrl"==l.current.controller||"UsersListCtrl"==l.current.controller?$.hideContext=!0:$.hideContext=!1,$.breadcrumbs=d.breadcrumbs,$.emailNew=!1,$.openSideNav=y,$.hideMenuButton=b,$.toggleNotificationsTab=C,$.isFullScreen=!1,$.customContext=t.currentSelectedCompanyName,e.$on("ContextChanged",function(e,n){t.currentSelectedCompanyName=_.head(_.filter(t.companies,["id",n])).description,$.customContext=t.currentSelectedCompanyName,$.hideContext=!1}),e.$on("hideCustomContext",function(e,n){$.hideContext=n,$.hideContext==n&&t.$broadcast("hideCustomContextCompleted")}),$.fullScreenIcon="zmdi zmdi-fullscreen",$.toggleFullScreen=S,$.logOut=x,$.currentUser=t.repository.loggedUser,$.allowRefresh=!0;var E={params:{userId:0,size:10,page:1}};$.currentUser&&(E.params.userId=$.currentUser.userId),e.$on("changeSize",function(e){E.params.size+=10,g.get("api/notifications/search",E,function(e){t.$broadcast("onNotificationRefresh",e.data)},function(e){})}),h(),setInterval(function(){t.repository&&t.repository.loggedUser&&g.get("api/notifications/getUnreadNumber",null,function(e){$.numberOfNotifications=e.data},function(e){})},5e3),e.$on("notificationsNumberChanged",function(e,t){g.get("api/notifications/getUnreadNumber",null,function(e){$.numberOfNotifications=e.data},function(e){})})}e.$inject=["$scope","$rootScope","$mdMedia","$element","$filter","$mdUtil","$mdSidenav","$mdToast","$state","$timeout","$document","triBreadcrumbsService","triSettings","triLayout","membershipService","apiService"],angular.module("triangular.components").controller("ToolbarController",e)}(),function(){"use strict";function e(e,t,n,a){function r(){a.go("triangular.home-admin")}function o(){var e="icon"==i.layout.sideMenuSize?"full":"icon";t.setOption("sideMenuSize",e)}var i=this;i.layout=t.layout,i.sidebarInfo={appName:e.name,appLogo:e.logo};var s=localStorage.getItem("alzagro-repository");if(s){var l=JSON.parse(s);i.loggedUser=Object.keys(l.loggedUser).length>0}else i.loggedUser=!1;i.toggleIconMenu=o,i.gohome=r}e.$inject=["triSettings","triLayout","triRoute","$state"],angular.module("triangular.components").controller("LeftSidenavController",e)}(),function(){"use strict";function e(e,t,n,a,r,o,i,s,l){function c(e){d.notificationGroups=[{name:"Notificaciones",notifications:[],totalItems:e.totalItems}],e.results=_.orderBy(e.results,["updatedDateTime"],["desc"]),e.results.forEach(function(e){e.icon="alz-cancel-circle",e.iconColor="#FF5151",e.clickParameter=JSON.parse(e.clickParameter),e.date=e.updatedDateTime,d.notificationGroups[0].notifications.push(e)})}function u(e){c(e.data)}var d=this;d.currentTab=1,e.currentUser=s.repository.loggedUser,d.markAllAsReaded=function(){d.notificationGroups.forEach(function(e){d.notificationGroups.indexOf(e);e.notifications.forEach(function(e){if(!e.read){var t=Object.assign({},e);t.read=!0,t.clickParameter=JSON.stringify(t.clickParameter),i.post("api/notifications",t,function(){e.read=!0,s.$broadcast("notificationsNumberChanged")},function(e){notificationService.displayError(e.data.message)})}})})},d.onNotificationClick=function(e,t,a){n("notifications").toggle();var o=d.notificationGroups[t].notifications.indexOf(e);if(!e.read){s.$broadcast("notificationsNumberChanged"),e.read=!0;var l=Object.assign({},e);l.clickParameter=JSON.stringify(l.clickParameter),i.post("api/notifications",l,function(){d.notificationGroups[t].notifications[o].read=!0,s.notifications[t].read=!0},function(e){console.log(e)})}r.go("triangular.expense-details",{id:e.clickParameter.Id,data:e,enteredViaNotifications:!0})},d.switchNotifications=function(){if(s.repository.loggedUser){var t={params:{userId:s.repository.loggedUser,showNotifications:e.currentUser.showNotifications}};a.updateSettings(t),s.$broadcast("turnNotifications")}},e.$on("onNotificationRefresh",function(e,t){c(t)}),e.$on("triSwitchNotificationTab",function(e,t){d.currentTab=t;var n={params:{userId:0,size:10,page:1}};s.repository&&s.repository.loggedUser&&(n.params.userId=s.repository.loggedUser.userId,i.get("api/notifications/search",n,u,function(e){}))}),d.nextPage=function(){s.$broadcast("changeSize")}}e.$inject=["$scope","$http","$mdSidenav","membershipService","$state","API_CONFIG","apiService","$rootScope","$timeout"],angular.module("triangular.components").controller("RightSidenavController",e)}(),function(){"use strict";angular.module("app",["ui.router","triangular","ngAnimate","ngCookies","ngSanitize","ngMessages","ngMaterial","googlechart","chart.js","linkify","angularMoment","textAngular","hljs","papa-promise","angular-js-xlsx","ngFileSaver","md.data.table","material.components.expansionPanels","ngFileUpload","nvd3","common.core","app.permission","common.ui","app.views"]).constant("API_CONFIG",{url:"http://www.movizen.com"})}(),function(){"use strict";function e(e){this.triSettings=e}e.$inject=["triSettings"],angular.module("app").controller("LoaderController",e)}(),function(){"use strict";function e(e,t){var n=this;n.layout=e,n.settings=t}e.$inject=["triLayout","triSettings"],angular.module("app").controller("AppFooterController",e)}(),function(){"use strict";function e(e,t){e.state("triangular.users-list",{url:"/users/list",templateUrl:"../Scripts/app/views/users/list/users-list.tmpl.html",controller:"UsersListCtrl",controllerAs:"vm",data:{permissions:{only:["viewSystemAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.users-edit",{url:"/users/edit/:id",templateUrl:"../Scripts/app/views/users/edit/users-edit.tmpl.html",controller:"UsersEditCtrl",controllerAs:"vm",data:{permissions:{only:["viewSystemAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.users-password",{url:"/users/change-password",templateUrl:"../Scripts/app/views/users/password/users-password.tmpl.html",controller:"UsersPasswordCtrl",controllerAs:"vm",data:{permissions:{only:["viewAdmin","viewUser","viewSystemAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.users-profile",{url:"/users/edit-profile",templateUrl:"../Scripts/app/views/users/profile/users-profile.tmpl.html",controller:"UsersProfileCtrl",controllerAs:"vm",data:{permissions:{only:["viewAdmin","viewUser"]},layout:{contentClass:"layout-column"}}}),t.addMenu({name:"Usuarios",icon:"fa fa-user",type:"link",priority:.6,hideCustomContext:!0,state:"triangular.users-list",permission:["viewSystemAdmin"]}),t.addMenu({name:"Mi Perfil",icon:"fa fa-user",type:"link",priority:0,hideCustomContext:!0,state:"triangular.users-profile",permission:["viewHidden"]}),t.addMenu({name:"Cambiar contraseña",hideCustomContext:!0,icon:"fa fa-user",type:"link",priority:0,state:"triangular.users-password",permission:["viewHidden"]})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("users-module").config(e)}(),function(){"use strict";function e(e,t){e.state("triangular.requests-list",{url:"/requests/list/:id",templateUrl:"../Scripts/app/views/requests/list/requests-list.tmpl.html",controller:"RequestsListCtrl",controllerAs:"vm",data:{permissions:{only:["viewAdmin"]},layout:{contentClass:"layout-column",sideMenuSize:"full"}}})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("requests-module").config(e)}(),function(){"use strict";function e(e,t){e.state("triangular.provider-list",{url:"/providers",templateUrl:"../Scripts/app/views/provider/list/provider-list.tmpl.html",controller:"ProviderListCtrl",controllerAs:"vm",data:{permissions:{only:["viewAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.provider-details",{url:"/provider/:id",templateUrl:"../Scripts/app/views/provider/details/provider-details.tmpl.html",controller:"ProviderDetailsCtrl",controllerAs:"vm",data:{permissions:{only:["viewAdmin"]},layout:{contentClass:"layout-column"}},params:{id:null,data:null}}),t.addMenu({name:"Proveedores",icon:"alz-users",type:"link",hideCustomContext:!0,priority:6,state:"triangular.provider-list",permission:["viewAdmin"]})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("provider-module").config(e)}(),function(){"use strict";function e(e,t){e.state("triangular.reports-status-change",{url:"/reports/expense-status-change",templateUrl:"../Scripts/app/views/abm/reports/status-change/status-change.tmpl.html",controller:"StatusChangeReport",controllerAs:"vm",data:{permissions:{only:["viewSystemAdmin","viewAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.code-search",{url:"/search-code",templateUrl:"../Scripts/app/views/abm/code-search/code-search.tmpl.html",controller:"CodeSearchCtrl",controllerAs:"vm",data:{permissions:{only:["viewSystemAdmin","viewAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.payment-list",{url:"/payment/list",templateUrl:"../Scripts/app/views/abm/payment/list/payment-list.tmpl.html",controller:"PaymentListCtrl",controllerAs:"vm",data:{permissions:{only:["viewSystemAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.payment-edit",{url:"/payment/edit/:id",templateUrl:"../Scripts/app/views/abm/payment/edit/payment-edit.tmpl.html",controller:"PaymentEditCtrl",controllerAs:"vm",data:{permissions:{only:["viewSystemAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.category-list",{url:"/category/list",templateUrl:"../Scripts/app/views/abm/category/list/category-list.tmpl.html",controller:"CategoryListCtrl",controllerAs:"vm",data:{permissions:{only:["viewSystemAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.category-edit",{url:"/category/edit/:id",templateUrl:"../Scripts/app/views/abm/category/edit/category-edit.tmpl.html",controller:"CategoryEditCtrl",controllerAs:"vm",data:{permissions:{only:["viewSystemAdmin"]},layout:{contentClass:"layout-column"}}}).state("triangular.configuration",{url:"/config",templateUrl:"../Scripts/app/views/abm/config/system-config.tmpl.html",controller:"ConfigCtrl",controllerAs:"vm",data:{permissions:{only:["viewSystemAdmin"]},layout:{contentClass:"layout-column"}}}),t.addMenu({name:"Forma de pago",icon:"fa fa-credit-card-alt",type:"link",priority:8,hideCustomContext:!0,state:"triangular.payment-list",permission:["viewSystemAdmin"]}),t.addMenu({name:"Buscador de código",icon:"fa fa-search",type:"link",priority:6.5,hideCustomContext:!0,state:"triangular.code-search",permission:["viewSystemAdmin","viewAdmin"]}),t.addMenu({name:"Categorías",icon:"fa fa-list",type:"link",priority:7,hideCustomContext:!0,state:"triangular.category-list",permission:["viewSystemAdmin"]}),t.addMenu({name:"Configuración",icon:"fa fa-cog",type:"link",priority:9,hideCustomContext:!0,state:"triangular.configuration",permission:["viewSystemAdmin"]}),t.addMenu({name:"Cambios de estado",icon:"fa fa-exchange",type:"link",priority:8,hideCustomContext:!0,state:"triangular.reports-status-change",permission:["viewSystemAdmin","viewAdmin"]})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("abm-module").config(e)}(),function(){"use strict";function e(e,t){e.state("triangular.home-admin",{url:"/home",templateUrl:"../Scripts/app/views/home/admin/admin-home.tmpl.html",controller:"AdminHomeCtrl",controllerAs:"vm",data:{permissions:{only:["viewAdmin","viewUser"]},layout:{contentClass:"layout-column"}}}),t.addMenu({name:"Resumen",icon:"alz-chart-bar",type:"link",priority:1,state:"triangular.home-admin",permission:["viewAdmin","viewUser"]})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("home-module").config(e)}(),function(){"use strict";function e(e,t){e.state("triangular.payments-list",{url:"/payments/list/:id",templateUrl:"../Scripts/app/views/payments/list/payments-list.tmpl.html",controller:"PaymentsListCtrl",controllerAs:"vm",data:{permissions:{only:["viewAdmin"]},layout:{contentClass:"layout-column",sideMenuSize:"full"}}})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("payments-module").config(e)}(),function(){"use strict";function e(e,t){e.state("triangular.expenses-list",{url:"/expenses/list",templateUrl:"../Scripts/app/views/expenses/list/expenses-list.tmpl.html",controller:"ExpensesListCtrl",controllerAs:"vm",data:{permissions:{only:["viewAdmin","viewUser"]},layout:{contentClass:"layout-column"}},params:{isReport:null}}).state("triangular.expense-details",{url:"/expense/:id",templateUrl:"../Scripts/app/views/expenses/details/expense-details.tmpl.html",controller:"ExpenseDetailsController",controllerAs:"vm",data:{permissions:{only:["viewAdmin","viewUser"]},layout:{contentClass:"layout-column"}},params:{id:null,data:null,enteredViaNotifications:null}}),t.addMenu({name:"Gastos",icon:"alz-coins",type:"link",priority:2,state:"triangular.expenses-list",permission:["viewAdmin","viewUser"]}),t.addMenu({name:"Gastos",icon:"alz-coins",type:"dropdown",permission:["viewHidden"],priority:2.1,children:[{name:"Detalles",icon:"zmdi zmdi-accounts-alt",type:"link",state:"triangular.expense-details"}]})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("expenses-module").config(e)}(),function(){"use strict";angular.module("companies-module",[])}(),function(){"use strict";function e(e,t,n){t.addMenu({name:"Semillas",icon:"alz-seed",type:"link",contextVariable:1,priority:.1,state:"triangular.home-admin",permission:["Semillas"]}),t.addMenu({name:"Nutrientes",icon:"alz-seeding",contextVariable:2,type:"link",priority:.2,state:"triangular.home-admin",permission:["Nutrientes"]}),t.addMenu({name:"Mercados",icon:"fa fa-usd",type:"link",contextVariable:3,priority:.3,state:"triangular.home-admin",permission:["Mercados"]}),t.addMenu({name:"Solidum",icon:"alz-solidum",type:"link",contextVariable:4,priority:.4,state:"triangular.home-admin",permission:["Solidum"]})}e.$inject=["$stateProvider","triMenuProvider","$rootScopeProvider"],angular.module("companies-module").config(e)}(),function(){"use strict";function e(e,t){e.state("triangular.account",{abstract:!0,templateUrl:"/Scripts/app/views/account/layouts/authentication.tmpl.html",data:{permissions:{only:["viewAnonymus"]},layout:{showToolbar:!1,toolbarShrink:!0,toolbarClass:"none",contentClass:"layout-column",sideMenuSize:"off",footer:!1}}}).state("triangular.account.login",{url:"/login",templateUrl:"/Scripts/app/views/account/login/login.tmpl.html",controller:"LoginCtrl",controllerAs:"vm"}).state("triangular.account.forgot",{url:"/forgot",templateUrl:"/Scripts/app/views/account/forgot/forgot.tmpl.html",controller:"ForgotCtrl",controllerAs:"vm"})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("account-module").config(e)}(),function(){"use strict";angular.module("triangular.themes",[])}(),function(){"use strict";function e(e){var n={};return{theme:function(e){if(angular.isDefined(n[e]))return n[e];var a=new t(e);return n[e]=a,n[e]},$get:function(){return{getTheme:function(e){return n[e]},getThemeHue:function(t,n,a){if(angular.isDefined(e._THEMES[t])&&angular.isDefined(e._THEMES[t].colors[n])){var r=e._THEMES[t].colors[n];if(angular.isDefined(e._PALETTES[r.name])&&angular.isDefined(e._PALETTES[r.name][r.hues[a]]))return e._PALETTES[r.name][r.hues[a]]}},getPalette:function(t){return e._PALETTES[t]},getPaletteColor:function(t,n){if(angular.isDefined(e._PALETTES[t])&&angular.isDefined(e._PALETTES[t][n]))return e._PALETTES[t][n]},rgba:e._rgba,palettes:e._PALETTES,themes:e._THEMES,parseRules:e._parseRules}}}}function t(e){var t=["primary","accent","warn","background"],n=this;n.name=e,n.colors={},n.isDark=!1,t.forEach(function(e){n[e+"Palette"]=function(t,a){return n.colors[e]={name:t,hues:{}},angular.isDefined(a)&&(n.colors[e].hues=a),n}}),n.dark=function(e){n.isDark=!!angular.isUndefined(e)||e}}e.$inject=["$mdThemingProvider"],angular.module("triangular.themes").provider("triTheming",e)}(),function(){"use strict";function e(e,n){var a={},r=null,o=!1;return{skin:function(r,o){if(angular.isDefined(a[r]))return a[r];var i=new t(r,o,e,n);return a[r]=i,a[r]},setSkin:function(e){if(!angular.isUndefined(a[e])){if(r=a[e],o){var t;angular.injector(["ngCookies"]).invoke(["$cookies",function(e){t=e}]);var n=t.get("triangular-skin");if(angular.isDefined(n)){var i=angular.fromJson(n);r=angular.isDefined(a[i.skin])?a[i.skin]:a[0]}}return r.loadThemes(),r}},useSkinCookie:function(e){o=e},$get:function(){return{getCurrent:function(){return r},getSkins:function(){return a}}}}}function t(e,t,n,a){var r=["sidebar","logo","toolbar","content"],o=this;o.id=e,o.name=t,o.elements={},r.forEach(function(e){o[e+"Theme"]=function(t){return o.elements[e]=t,o}}),o.loadThemes=function(){for(var e in o.elements){var t=a.theme(o.elements[e]);n.theme(t.name).primaryPalette(t.colors.primary.name,t.colors.primary.hues).accentPalette(t.colors.accent.name,t.colors.accent.hues).warnPalette(t.colors.warn.name,t.colors.warn.hues).dark(t.isDark),angular.isDefined(t.colors.background)&&n.theme(t.name).backgroundPalette(t.colors.background.name,t.colors.background.hues)}n.setDefaultTheme(o.elements.content)}}function n(e,t){e.triSkin=t.getCurrent()}e.$inject=["$mdThemingProvider","triThemingProvider"],t.$inject=["id","name","$mdThemingProvider","triThemingProvider"],n.$inject=["$rootScope","triSkins"],angular.module("triangular.themes").provider("triSkins",e).run(n)}(),function(){"use strict";angular.module("triangular",["ngMaterial","triangular.layouts","triangular.components","triangular.themes","triangular.directives","triangular.router","ui.router"])}(),function(){"use strict";function e(e,t,n,a,r,o,i,s){function l(){r(function(){var e=i.title;angular.forEach(c.crumbs,function(t){var n=t.name;o.has("translateFilter")&&(n=a("translate")(t.name)),e+=" "+i.separator+" "+n}),t.document.title=e})}var c=s.breadcrumbs,u=e.$on("changeTitle",function(){l()});e.$on("$destroy",function(){u()})}e.$inject=["$rootScope","$window","$state","$filter","$timeout","$injector","triRoute","triBreadcrumbsService"],angular.module("triangular").run(e)}(),function(){"use strict";function e(){function e(e){a.docTitle=e}function t(e){a.separator=e}function n(){return{title:a.docTitle,separator:a.separator}}var a={docTitle:"",separator:""};this.setTitle=e,this.setSeparator=t,this.$get=n}angular.module("triangular").provider("triRoute",e)}(),function(){"use strict";angular.module("triangular.router",[])}(),function(){"use strict";angular.module("triangular.profiler",["digestHud"])}(),function(){"use strict";function e(e){e.enable(),e.setHudPosition("top right"),e.numTopWatches=20,e.numDigestStats=25}e.$inject=["digestHudProvider"],angular.module("triangular.profiler").config(e)}(),function(){"use strict";function e(){function e(e){return n[e]}function t(e,t){n[e]=t}var n={toolbarSize:"default",toolbarShrink:!0,toolbarClass:"",contentClass:"",innerContentClass:"",sideMenuSize:"full",showToolbar:!0,footer:!0,contentTemplateUrl:"../Scripts/app/triangular/layouts/default/default-content.tmpl.html",sidebarLeftTemplateUrl:"../Scripts/app/layouts/leftsidenav/leftsidenav.tmpl.html",sidebarLeftController:"MenuController",sidebarRightTemplateUrl:"../Scripts/app/triangular/components/notifications-panel/notifications-panel.tmpl.html",sidebarRightController:"NotificationsPanelController",toolbarTemplateUrl:"../Scripts/app/triangular/components/toolbars/toolbar.tmpl.html",toolbarController:"DefaultToolbarController",footerTemplateUrl:"../Scripts/app/triangular/components/footer/footer.tmpl.html"},a=["toolbarSize","toolbarShrink","toolbarClass","contentClass","innerContentClass","sideMenuSize","showToolbar","footer","contentTemplateUrl","sidebarLeftTemplateUrl","sidebarLeftController","sidebarRightTemplateUrl","sidebarRightController","toolbarTemplateUrl","toolbarController","footerTemplateUrl","loaderTemplateUrl","loaderController"],r={}
;this.getDefaultOption=e,this.setDefaultOption=t,angular.extend(r,n),this.$get=function(){function e(e,t){r[e]=t}function t(e,t){angular.forEach(a,function(e){if("sideMenuSize"!=e)r[e]=n[e];else{if("icon"===r[e]){var t=document.getElementsByClassName("triangular-sidenav-left");t&&t[0]&&t[0].classList.remove("hover")}"off"!==r[e]&&"hidden"!==r[e]||(r[e]=n[e])}});var o=angular.isDefined(t.data)&&angular.isDefined(t.data.layout)?t.data.layout:{};angular.extend(r,r,o)}return{layout:r,setOption:e,updateLayoutFromState:t}}}function t(e,t){function n(){a()}var a=e.$on("$stateChangeStart",t.updateLayoutFromState);e.$on("$destroy",n)}t.$inject=["$rootScope","triLayout"],angular.module("triangular").run(t).provider("triLayout",e)}(),function(){"use strict";angular.module("triangular.directives",[])}(),function(){"use strict";function e(e,t){function n(n,a,r){e(a);var o=a.controller("mdTheme");if(angular.isDefined(o)){var i=r.themeBackground,s="default";if(-1!==i.indexOf(":")){var l=r.themeBackground.split(":");i=l[0],s=l[1]}var c=t.getThemeHue(o.$mdTheme,i,s);angular.isDefined(c)&&a.css({"background-color":t.rgba(c.value),"border-color":t.rgba(c.value),color:t.rgba(c.contrast)})}}return{link:n,restrict:"A"}}e.$inject=["$mdTheming","triTheming"],angular.module("triangular.directives").directive("themeBackground",e)}(),function(){"use strict";function e(){function e(e,t,n,a){a.$viewChangeListeners.push(function(){a.$setValidity("samePassword",e.triSamePassword.$modelValue===a.$modelValue),e.triSamePassword.$setValidity("samePassword",e.triSamePassword.$modelValue===a.$modelValue)})}return{restrict:"A",require:"ngModel",link:e,scope:{triSamePassword:"="}}}angular.module("triangular.directives").directive("triSamePassword",e)}(),function(){"use strict";function e(e){function t(t,n,a){var r=a.paletteBackground.split(":"),o=e.getPaletteColor(r[0],r[1]);angular.isDefined(o)&&n.css({"background-color":e.rgba(o.value),"border-color":e.rgba(o.value),color:e.rgba(o.contrast)})}return{link:t,restrict:"A"}}e.$inject=["triTheming"],angular.module("triangular.directives").directive("paletteBackground",e)}(),function(){"use strict";function e(e){function t(t,n,a){var r,o={useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:""};if(t.options)for(var i in o)angular.isDefined(t.options[i])&&(o[i]=t.options[i]);a.from=angular.isUndefined(a.from)?0:parseInt(a.from),a.decimals=angular.isUndefined(a.decimals)?2:parseFloat(a.decimals),a.duration=angular.isUndefined(a.duration)?5:parseFloat(a.duration),e(function(){r=new CountUp(n[0],a.from,t.countupto,a.decimals,a.duration,o),r.start(),t.$watch("countupto",function(e,t){angular.isDefined(e)&&e!=t&&r.update(e)})},500)}return{link:t,restrict:"A",scope:{countupto:"=",options:"="}}}e.$inject=["$timeout"],angular.module("triangular.directives").directive("countupto",e)}(),function(){"use strict";angular.module("common.ui",["chieffancypants.loadingBar","blockUI","thatisuday.ng-image-gallery","19degrees.ngSweetAlert2","smart-table"])}(),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"/scripts/app/directives/layout/topBar.html"}}e.directive("topBar",t)}(angular.module("common.ui")),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"/scripts/app/directives/layout/sideBar.html"}}e.directive("sideBar",t)}(angular.module("common.ui")),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"/scripts/app/directives/layout/menuProfile.html"}}e.directive("menuProfile",t)}(angular.module("common.ui")),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"/scripts/app/directives/layout/menuFooter.html"}}e.directive("menuFooter",t)}(angular.module("common.ui")),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"/scripts/app/directives/layout/footerContent.html"}}e.directive("footerContent",t)}(angular.module("common.ui")),function(e){"use strict";function t(){return{restrict:"AE",scope:{data:"="},templateUrl:"/scripts/app/directives/controls/mvzTreeView.html",replace:!1,link:function(e,t,n){},controller:["$scope","$element",function(e,t){}]}}e.directive("mvzTreeView",t)}(angular.module("common.ui")),function(e){"use strict";function t(e,t){return{restrict:"E",scope:{branch:"="},templateUrl:"/scripts/app/directives/controls/mvzTreeSingle.html",compile:function(t,n){var a,r=t.contents().remove();return function(t,n,o){a||(a=e(r)),a(t,function(e,t){n.append(e)})}},controller:["$scope","$timeout",function(e,t){function n(e,n){t(function(){$(".md-nav-item i.fa.fa-check-square-o").trigger("click"),e.isSelected=n})}e.toggle=function(t,a,r){r||(r=0),null!==a&&void 0!==a||(a=!t.isSelected),a?n(t,a):(t.isSelected=a,0===r&&t.parent&&a&&e.checkParent(t))},e.expand=function(t,n){n||(n=!t.isExpanded),t.isExpanded=n,t.children.forEach(function(t){e.expand(t,n)})},e.checkParent=function(t){t.isSelected=!0,t.parent&&e.checkParent(t.parent)}}]}}t.$inject=["$compile","$timeout"],e.directive("mvzTreeSingle",t)}(angular.module("common.ui")),function(e){"use strict";function t(e){var t="";return{restrict:"E",scope:{branch:"=",singleSelection:"@"},templateUrl:"/scripts/app/directives/controls/mvzTree.html",compile:function(t,n){var a,r=t.contents().remove();return function(t,n,o){a||(a=e(r)),a(t,function(e,t){n.append(e)})}},controller:["$scope",function(e){function n(){t&&$(".md-nav-item i.fa.fa-check-square-o").click()}e.singleSelection&&(t=e.singleSelection),e.toggle=function(a,r,o){o||(o=0),null!=r&&void 0!=r||(r=!a.isSelected),r&&t?(n(),a.isSelected=r):(a.isSelected=r,0==o&&a.parent&&r&&e.checkParent(a))},e.expand=function(t,n){n||(n=!t.isExpanded),t.isExpanded=n,t.children.forEach(function(t){e.expand(t,n)})},e.checkParent=function(t){t.isSelected=!0,t.parent&&e.checkParent(t.parent)}}]}}t.$inject=["$compile"],e.directive("mvzTree",t)}(angular.module("common.ui")),function(e){"use strict";function t(e){return{restrict:"AE",scope:{title:"@"},templateUrl:"/scripts/app/directives/controls/mvzTitle.html",replace:!0}}t.$inject=["$compile"],e.directive("mvzTitle",t)}(angular.module("common.ui")),function(e){"use strict";function t(e){return{restrict:"AE",scope:{model:"=",label:"@",requiredMessage:"@",name:"@",type:"@",validationRules:"@"},templateUrl:"/scripts/app/directives/controls/mvzTextarea.html",replace:!0,controller:["$scope",function(e){function t(){return String(e.model).length}if(e.getLength=t,e.limit=0,!e.validationRules)return 0;e.limit=Number(e.validationRules.split("max_length:")[1])}]}}t.$inject=["$compile"],e.directive("mvzTextarea",t)}(angular.module("common.ui")),function(e){"use strict";function t(e,t,n,a,r,o,s,l,c,u){return{restrict:"AE",scope:{actions:"=",fabActions:"=",columns:"=",extras:"=?",advancedFilters:"=",data:"=?",title:"@",keyItem:"@",sourceName:"@",actionsClass:"@",showActions:"=",groupBy:"=?",editUrl:"@",allowAdd:"=",iconAdd:"@",allowEdit:"=",iconEdit:"@",allowDelete:"=",cleanTable:"@",controllerName:"@",actionName:"@",customDelete:"@",deleteUrl:"@",useRemoteSource:"=?",autoLoad:"@",customParams:"=",onActionCallback:"&",updateParams:"&",allowSelection:"=",disableSearchDescription:"=?",showFilter:"@",showFilters:"=?",showMultiSelect:"=",exportExcel:"=?",exportOnlyVerified:"=?",exportExcelUrl:"@",exportVariable:"@",exportDefaultName:"=?",customToolbar:"=",customFooter:"=",customButtons:"=",forceShowToolbar:"=?",tableLimitOptions:"=?"},templateUrl:"/scripts/app/directives/controls/mvzTable.html",replace:!1,link:function(e,t,n,a){function i(t,n){null!=t&&(angular.isUndefined(e.editUrl)?s.go("triangular."+a.controllerName+"-edit",{id:t,data:n}):s.go(e.editUrl,{id:t,data:n}))}function l(){var t=r.getSelected(e.data);1==t.length?angular.isUndefined(e.editUrl)?s.go("triangular."+a.controllerName+"-edit",{id:t[0].id}):s.go("triangular."+e.editUrl+"-edit",{id:t[0].id}):o.displayError("Debe seleccionar solo un registro")}function c(){angular.isUndefined(e.editUrl)?s.go("triangular."+a.controllerName+"-edit",{fromList:!0}):s.go(e.editUrl,{fromList:!0})}function u(t){var n=e.data.indexOf(t);e.data[n].selected=!e.data[n].selected}function d(t){angular.isUndefined(e.deleteUrl)?r.remove(e.controllerName,e.data,t,function(t){e.data.splice(t,1),e.getSource()}):r.remove(e.deleteUrl,void 0,e.data,t,function(t){e.data.splice(t,1),e.getSource()})}function m(){var t=r.getSelected(e.data);t.length>1?angular.isUndefined(a.deleteUrl)?r.removeSelected(a.controllerName,a.customDelete,e.data,function(t){t&&t.length?e.data=t:e.getSource()}):r.removeSelected(a.deleteUrl,void 0,e.data,function(t){t&&t.length?e.data=t:e.getSource()}):d(t[0].id),e.getSource()}function p(t){return t[e.keyItem]}e.edit=i,e.remove=d,e.getKey=p,e.add=c,e.removeSelected=m,e.editSelected=l,e.select=u,e.selectedItems=[],a.remoteSource||(e.remoteSource=null)},controller:["$scope","$http","$element","$rootScope",function(e,t,n,s){function d(t,n){e.filter&&e.filter.form&&e.filter.form.city&&e.filter.form.city.$setValidity("required",!0),e.showClear=!0,n&&n(t.model);for(var t in e.advancedFilters){var a=e.advancedFilters[t];if(a.isSearch)a.model?e.filterParams[a.param]=a.model[a.searchParam]:e.filterParams[a.param]=a.model;else if(a.isStatus)switch(e.filterParams[a.param]=a.model,a.model){case null:e.advancedFilters[t].model=0;break;case!0:e.advancedFilters[t].model=1;break;case!1:e.advancedFilters[t].model=2}else e.filterParams[a.param]=a.model;a.disableDependencies&&a.disableDependencies()}e.getSource()}function m(){var n=p();if(e.exportOnlyVerified){var r=l.prompt().title("Exportar datos").textContent("Elija el nombre del archivo que se descargará:").placeholder("Nombre").ariaLabel("fileName").initialValue(n.params.fileName?n.params.fileName:null).required(!0).ok("DESCARGAR").cancel("CANCELAR");l.show(r).then(function(r){n.params.fileName=r,a.post(e.exportExcelUrl,n.params,function(a){t.get(a.data.url,{responseType:"arraybuffer"}).then(function(t){var a=new c([t.data],{type:"text/csv"});u.saveAs(a,n.params.fileName?n.params.fileName+".csv":e.exportDefaultName+"-"+moment().format("DD-MM-YYYY-HH:mm")+".csv")})},function(){o.serverError(error,"No se pudo generar el reporte. Intente nuevamente en unos minutos.")})},function(){})}else a.exportData(e.exportExcelUrl,n.params)}function p(){var t={params:e.query},n=e.updateParams();if(n.orderBy=t.params.orderBy?t.params.orderBy:n.orderBy,n.partialDescription=t.params.partialDescription,n&&(n.size=t.params.size,n.page=t.params.page,angular.forEach(n,function(e,n){t.params[n]=e})),e.filterParams)angular.forEach(e.filterParams,function(e,n){t.params[n]=e});else{for(i=0;i<e.advancedFilters.length;i++)e.advancedFilters[i].param.includes("Date")&&null!=e.advancedFilters[i].model?e.filterParams[e.advancedFilters[i].param]=e.advancedFilters[i].model.toISOString():"boolean"==typeof e.advancedFilters[i].model?e.filterParams[e.advancedFilters[i].param]=e.advancedFilters[i].model?"true":"false":e.filterParams[e.advancedFilters[i].param]=e.advancedFilters[i].model;angular.forEach(e.filterParams,function(e,n){t.params[n]=e})}return t}function f(t){s.mvzTableData=[],s.mvzTableLoaded=!1,e.cleanTable&&(e.data=[]),e.selectAll=!1,e.selected=!1,e.filter&&e.filter.form&&e.filter.form.city&&e.filter.form.city.$setValidity("required",!0);var n=p();t&&"number"==typeof t&&(n.params.page=t),window.innerWidth<=480&&window.innerHeight<=800&&(e.showFilter=!1),"false"!=e.autoLoad&&e.useRemoteSource?e.promise=a.get("/api/"+e.controllerName+"/"+e.actionName,n,h,v):e.autoLoad=!0}function g(){e.showFilter=!1,e.query.partialDescription="",e.filter.form.$dirty&&e.filter.form.$setPristine()}function h(t){if(t.data.resume?e.resume=t.data.resume:e.resume={},t.data[e.sourceName]?(angular.forEach(t.data[e.sourceName],function(e,t){e.selected=!1}),angular.forEach(t.data[e.sourceName],function(t,n){var a=e.data.filter(function(e){return e.id==t.id});a.length>0&&a[0].selected&&t.selected}),e.groupBy?e.data=_.groupBy(t.data[e.sourceName],function(t){return e.groupBy.parentRoot?t[e.groupBy.parentRoot][e.groupBy.field]:t[e.groupBy.field]}):e.data=t.data[e.sourceName]):e.data=[],e.totalItems=t.data.totalItems,e.totalItems>0&&!angular.isUndefined(e.tableLimitOptions)){var n=e.tableLimitOptions[e.tableLimitOptions.length-1],a=e.tableLimitOptions.indexOf(n);"object"==typeof n&&(e.tableLimitOptions[a].value=function(){return e.totalItems})}s.mvzTableData=e.data,s.$broadcast("subTotalChanged",t.data.subTotal),s.mvzTableLoaded=!0,s.$broadcast("mvzloadfinished",e.data)}function v(e){o.displayError(e.data.message)}e.isEditingOrder=!1,angular.isUndefined(e.name)&&(e.name="table-"+e.controllerName),angular.isUndefined(e.extras)&&(e.extras=[]),angular.isUndefined(e.forceShowToolbar)&&(e.forceShowToolbar=!1),angular.isUndefined(e.data)?e.data=[]:e.totalItems=e.data.length,angular.isUndefined(e.exportDefaultName)&&(e.exportDefaultName=e.title),angular.isUndefined(e.exportExcel)&&(e.exportExcel=!1),angular.isUndefined(e.exportOnlyVerified)&&(e.exportOnlyVerified=!1),angular.isUndefined(e.exportExcelUrl)&&(e.exportExcelUrl="/ExportData"),angular.isUndefined(e.exportVariable)&&(e.exportVariable="control"),angular.isUndefined(e.keyItem)&&(e.keyItem="id"),angular.isUndefined(e.useRemoteSource)&&(e.useRemoteSource=!0),angular.isUndefined(e.actionsClass)&&(e.actionsClass=null),angular.isUndefined(e.showActions)&&(e.showActions=!0),angular.isUndefined(e.showFilter)&&(e.showFilter=!1),angular.isUndefined(e.showFilters)&&(e.showFilters=!0),angular.isUndefined(e.disableSearchDescription)&&(e.disableSearchDescription=!1),angular.isUndefined(e.autoLoad)&&(e.autoLoad=!0),angular.isUndefined(e.isArray)&&(e.isArray=!1),angular.isUndefined(e.editUrl)&&(e.editUrl=e.controllerName),angular.isUndefined(e.actionName)&&(e.actionName="search"),angular.isUndefined(e.sourceName)&&(e.sourceName="results"),angular.isUndefined(e.iconEdit)&&(e.iconEdit="zmdi-edit"),angular.isUndefined(e.iconAdd)&&(e.iconAdd="zmdi-plus"),angular.isUndefined(e.customFooter)||(e.paginator=angular.element("md-table-pagination")[0].children),e.removeFilter=g,e.getSource=f,e.exportToExcel=m,e.addAll=function(t){e.selectAll=!t,angular.forEach(e.data,function(e,n){e.selected=!t})},e.customToolbarCallback=function(t){t(r.getSelected(e.data)).then(function(){e.getSource()}).catch(function(e){})},e.$on("setTableData",function(t,n){var a=_.orderBy(n.newData,["order"],["asc"]);e.data=a,s.mvzTableData=a}),e.$on("updateOutputData",function(){s.mvzTableData=e.data}),e.$on("updateInputData",function(){e.data=s.mvzTableData}),e.validationFn=function(e,t){return{isValid:e.applyValidation(t),message:e.errorMessage}},e.pageHasChanged=function(t,n){s.$broadcast("pageHasChanged"),e.getSource()},e.customButtonsCallback=function(t){if(t.isReOrder){var n=0;e.data.forEach(function(e){n++,e[s.orderingVariable].order&&0!==e[s.orderingVariable].order?e.order=e[s.orderingVariable].order:angular.isUndefined(e.order)&&(e.order=n)}),e.isEditingOrder=!e.isEditingOrder,s.$broadcast("editBackupSwitch"),e.customButtons.forEach(function(e){e.hide=!e.hide}),t.isSave&&t.callback().then(function(){e.getSource()})}else t.callback().then(function(){t.dontRefresh||e.getSource()})},e.capitalize=function(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)},e.isSorteable=function(e){return angular.isUndefined(e.sortable)||e.sortable},e.customToolbarDisabled=function(t){return t(r.getSelected(e.data))},e.formatDate=function(e,t,n){var a=e[t];switch(n){case"asHour":var r=a.split(":");a=r[0]+":"+r[1];break;case"asDate":a=moment(a).format("DD-MM-YYYY")}return a};var y;e.setSearchFilter=function(e,t){e.model&&e.model[e.searchParam]&&e.model!=y&&t(e.model[e.searchParam]),y=e.model},e.changeRatingFilter=function(t,n){e.showClear=!0,t.model=n.rating,d(t)},e.changeFilter=d,e.clear=function(){e.filter&&e.filter.form&&e.filter.form.city&&e.filter.form.city.$setValidity("required",!0);for(var t in e.advancedFilters)e.advancedFilters[t].model=null,e.advancedFilters[t].isRating&&(angular.element("#rating").data().$starRatingCompController.rating=0),(e.advancedFilters[t].default||0===e.advancedFilters[t].default)&&(e.advancedFilters[t].model=e.advancedFilters[t].default);e.changeFilter(),e.showClear=!1},e.filterParams={};var b=angular.isUndefined(e.customParams)||angular.equals({},e.customParams);e.query=b?{page:1,partialDescription:"",size:"10",orderBy:null}:e.customParams,e.filter={options:{debounce:500}},e.toolbar={showAdd:!0,showEdit:!1,showDelete:!1},e.selectAll=!1,e.selected=!1,e.showClear=!1,e.totalItems=e.data.length,e.$watch("data",function(t,n){if(t&&t!==n){var a=_.filter(_.concat(e.data),function(e){return 1==e.selected});s.selectedItems=a,a.length<1&&(e.toolbar.showAdd=!0,e.toolbar.showEdit=!1,e.toolbar.showDelete=!1,e.selected=!1),1==a.length&&(e.toolbar.showAdd=!1,e.toolbar.showEdit=!0,e.toolbar.showDelete=!0,e.selected=!0),a.length>1&&(e.toolbar.showAdd=!1,e.toolbar.showEdit=!1,e.toolbar.showDelete=!0,e.selected=!0)}},!0),e.$on("refresh",function(){e.getSource()}),e.getHalfStarVisible=function(e){var t=Math.abs(rating%1);return.1!=t&&t>0},e.getSelectedLength=function(){return _.filter(e.data,["selected",!0]).length},e.onAction=function(t,n,a){if(e.fabActions){if(e.fabActions.filter(function(e){return e.name==t}).length>0){var r=p();e.onActionCallback()(t,r.params,a)}else e.onActionCallback()(t,n,a)}else e.onActionCallback()(t,n,a,s.mvzTableData)},e.$on("mvztable-update",function(){e.useRemoteSource&&f()}),e.$on("mvztable-refresh-to-page",function(e,t){f(t)}),e.isSelectAllChecked=function(){return e.selectAll},e.showFiltersToolbar=function(){e.showFilter=!0},function(){new MobileDetect(window.navigator.userAgent).phone()?e.isMobile=!0:e.isMobile=!1;var t;e.$watch("query.partialDescription",function(n,a){a||(t=e.query.page),n!==a&&(e.query.page=1),n||(e.query.page=t),e.useRemoteSource&&f()})}()}]}}t.$inject=["$compile","$http","$rootScope","apiService","listService","notificationService","$state","$mdDialog","Blob","FileSaver"],e.directive("mvzTable",t)}(angular.module("common.ui")),function(e){"use strict";function t(e){return{restrict:"AE",scope:{model:"=",isDisabled:"=?",onSelect:"&",customOptions:"=",value:"@",display:"@",options:"=",placeholder:"@",label:"@",help:"@",isRequired:"=?",preventClear:"=?",requiredMessage:"@",name:"@",validationRules:"@",friendly:"=?",customClass:"=",customClassDinamic:"@",applyCustomClassDinamicWhen:"=?"},templateUrl:"/scripts/app/directives/controls/mvzSelect.html",replace:!0,controller:["$scope","$element",function(e,t){function n(){e.model=null,a(null)}function a(t){angular.isUndefined(e.onSelect())||e.onSelect()(t)}angular.isUndefined(e.isRequired)&&(e.isRequired=!1),angular.isUndefined(e.customClassDinamic)&&(e.customClassDinamic=""),angular.isUndefined(e.isDisabled)&&(e.isDisabled=!1),angular.isUndefined(e.customClass)&&(e.customClassAssigned=""),angular.isUndefined(e.applyCustomClassDinamicWhen)&&(e.applyCustomClassDinamicWhen=!1),e.$watch("customClass",function(t,n){void 0!=t&&(e.customClassAssigned=t)}),angular.isUndefined(e.validationRules)&&1==e.isRequired&&(e.validationRules="required"),e.clear=n,e.onClose=a}]}}t.$inject=["$compile"],e.directive("mvzSelect",t)}(angular.module("common.ui")),function(e){"use strict";function t(e,t,n,a){return{restrict:"AE",scope:{model:"=",onSelect:"=",display:"@",isDisabled:"=",updateParams:"&",selectedDisplay:"@",label:"@",controllerName:"@",actionName:"@",required:"@",notFoundMessage:"@",name:"@",requireFilterParameters:"="},templateUrl:"/scripts/app/directives/controls/mvzSearch.html",replace:!0,controller:["$scope","$element",function(e,n){var r={params:{getForBackOffice:!0}};e.searchText=null,angular.isUndefined(e.required)&&(e.required="false"),angular.isUndefined(e.isDisabled)&&(e.isDisabled=!1),angular.isUndefined(e.display)&&(e.display="description"),angular.isUndefined(e.label)&&(e.label="Buscar..."),angular.isUndefined(e.orderBy)&&(e.orderBy="id"),angular.isUndefined(e.notFoundMessage)&&(e.notFoundMessage="No se encontraron resultados."),angular.isUndefined(e.actionName)&&(e.actionName="search"),angular.isUndefined(e.selectedDisplay)&&(e.selectedDisplay=e.display),e.searchItems=function(){var n=t.defer();if(e.searchText.length>0){var o=e.updateParams();return o&&angular.forEach(o,function(e,t){r.params[t]=e}),r.params.partialDescription=e.searchText,1==e.requireFilterParameters&&null==o?(n.resolve(""),n.promise):(a.get("/api/"+e.controllerName+"/"+e.actionName,r,function(e){r.params.getForBackOffice?n.resolve(e.data.results):n.resolve(e.data)}),n.promise)}}}]}}t.$inject=["$compile","$q","$http","apiService"],e.directive("mvzSearch",t)}(angular.module("common.ui")),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"/scripts/app/directives/controls/mvzPaginator.html"}}e.directive("mvzPaginator",t)}(angular.module("common.ui")),function(e){"use strict";function t(e,t,n,a,r,o){return{restrict:"AE",scope:{model:"=",multipleFiles:"=",entity:"@",label:"@",name:"@",onActionCallback:"&",onRemoveCallback:"&"},templateUrl:"/scripts/app/directives/controls/mvzFileUpload.html",replace:!1,link:function(e,t,n){function i(t){if(0!=t.length){e.status="uploading";for(var n=0;n<t.length;n++){var i=t[n];!function(t){a.upload[t]=o.upload({url:"/api/fileUpload//upload?entity="+e.entity,method:"POST",headers:{Accept:"application/json","Content-Type":void 0},file:i}).progress(function(e){}).success(function(t,n,a,o){r.displaySuccess(t.fileName+" se ha subido con éxito.");var i={};i.path="/Resources/"+t.fileName,i.fileName=t.fileName,1==e.multipleFiles?e.files.push(i):(e.files=[],e.files.push(i)),e.status="idle",l(t.fileName)}).error(function(e,t,n,a){r.displayError(e.Message)})}(n)}}}function s(t){e.files.splice(t,1),e.onRemoveCallback()()}function l(t){e.onActionCallback()(t)}a.upload=[],e.status="idle",e.upload=i,e.removeFile=s,e.files=[]},controller:["$scope","$element",function(e,t){}]}}t.$inject=["$compile","$timeout","$mdToast","$rootScope","notificationService","Upload"],e.directive("mvzFileUpload",t)}(angular.module("common.ui")),function(e){"use strict";function t(e){return{restrict:"AE",scope:{model:"=",label:"@",name:"@",type:"@",isDisabled:"=?",isReadonly:"=?",validationRules:"@",validationCallBack:"=?",maxLength:"@",min:"@",help:"@",step:"@",onChange:"&",onBlur:"&",onKeyUp:"&",onKeyDown:"&"},templateUrl:"/scripts/app/directives/controls/mvzEditor.html",replace:!0,controller:["$scope","$element",function(e,t){angular.isUndefined(e.isDisabled)&&(e.isDisabled=!1),e.onKeyDownCallback=function(e){return 69!=e.keyCode},angular.isUndefined(e.isReadonly)&&(e.isReadonly=!1),e.onChangeInput=function(t){angular.isUndefined(e.onChange())||e.onChange()(t,e.name)},e.onBlurInput=function(t){angular.isUndefined(e.onBlur())||e.onBlur()(t,e.name)}}]}}t.$inject=["$compile"],e.directive("mvzEditor",t)}(angular.module("common.ui")),function(e){"use strict";function t(e,t){return{restrict:"AE",scope:{cancelUrl:"@",saveCallback:"&",cancelCallback:"&",showCustomCancel:"@",showCustomSave:"@",customSaveLabel:"@"},templateUrl:"/scripts/app/directives/controls/mvzEditToolBar.html",replace:!0,controller:["$scope","$element",function(e,n){function a(){null!=e.cancelUrl&&t.go(e.cancelUrl)}angular.isUndefined(e.showCustomCancel)&&(e.showCustomCancel=!1),angular.isUndefined(e.showCustomSave)&&(e.showCustomSave=!1),e.cancel=a}]}}t.$inject=["$compile","$state"],e.directive("mvzEditToolBar",t)}(angular.module("common.ui")),function(e){"use strict";function t(e){return{restrict:"AE",scope:{model:"=",options:"=",onChange:"&",label:"@",disabled:"=?",validationRules:"@",onBlur:"&",name:"@"},templateUrl:"/scripts/app/directives/controls/mvzDatePicker.html",replace:!0,controller:["$scope","$element",function(e,t){e.id="_"+Math.random().toString(36).substr(2,9),angular.isUndefined(e.disabled)&&(e.disabled=!1),e.onDateBlur=function(t){if(!angular.isUndefined(e.onBlur())){var n=document.getElementById(e.id);if(n){var a=n.childNodes[1];if(a){var r=a.childNodes[0].value;e.onBlur()(r)}}}},e.onChangeSelected=function(t){angular.isUndefined(e.onChange())||e.onChange()(t)}}]}}t.$inject=["$compile"],e.directive("mvzDatePicker",t)}(angular.module("common.ui")),function(e){"use strict";function t(e){return{restrict:"AE",scope:{model:"=",label:"@",name:"@"},templateUrl:"/scripts/app/directives/controls/mvzCheckbox.html",replace:!0}}t.$inject=["$compile"],e.directive("mvzCheckbox",t)}(angular.module("common.ui")),function(e){"use strict";function t(e,t){function n(e,t){"children"in e&&e.children.forEach(function(e){e.selected=t,n(e,t)}),e.selected=t}return{scope:!1,template:["<md-checkbox",'style="line-height: 0"','aria-label="checked"','ng-model="node.selected"',">","</md-checkbox>","<span>{{length}}</span>"].join("\n"),link:function(e,t,a,r){e.setChildren=n,t.on("click",function(t){n(e.node,e.node.selected),e.trvw.onCbChange(e.node,e.node.selected),e.$apply()})}}}t.$inject=["$compile","ivhTreeviewMgr"],e.directive("ivhTreeviewCheckbox",t)}(angular.module("common.ui")),function(){"use strict";angular.module("app.views",["account-module","abm-module","users-module","home-module","companies-module","expenses-module","provider-module"])}(),function(){"use strict";function e(e,t,n){-1!==n.navigator.platform.indexOf("Win")&&(e.bodyClasses=["os-windows"])}e.$inject=["$rootScope","$timeout","$window"],angular.module("triangular").run(e)}(),function(){"use strict";function e(){function e(e){o.languages.push(e)}function t(e){o.logo=e}function n(e){o.name=e}function a(e){o.copyright=e}function r(e){o.version=e}var o={languages:[],name:"",logo:"",copyright:"",version:""};this.addLanguage=e,this.setLogo=t,this.setName=n,this.setCopyright=a,this.setVersion=r,this.$get=function(){return{languages:o.languages,name:o.name,copyright:o.copyright,logo:o.logo,version:o.version,defaultSkin:o.defaultSkin}}}angular.module("triangular").provider("triSettings",e)}(),function(){"use strict";function e(e){e.state("triangular",{abstract:!0,views:{root:{templateUrl:"../Scripts/app/triangular/layouts/states/triangular/triangular.tmpl.html",controller:"TriangularStateController",controllerAs:"stateController"},"sidebarLeft@triangular":{templateProvider:["$templateRequest","triLayout",function(e,t){if(angular.isDefined(t.layout.sidebarLeftTemplateUrl))return e(t.layout.sidebarLeftTemplateUrl)}],controllerProvider:["triLayout",function(e){return e.layout.sidebarLeftController}],controllerAs:"vm"},"sidebarRight@triangular":{templateProvider:["$templateRequest","triLayout",function(e,t){if(angular.isDefined(t.layout.sidebarRightTemplateUrl))return e(t.layout.sidebarRightTemplateUrl)}],controllerProvider:["triLayout",function(e){return e.layout.sidebarRightController}],controllerAs:"vm"},"toolbar@triangular":{templateProvider:["$templateRequest","triLayout",function(e,t){if(angular.isDefined(t.layout.toolbarTemplateUrl))return e(t.layout.toolbarTemplateUrl)}],controllerProvider:["triLayout",function(e){return e.layout.toolbarController}],controllerAs:"vm"},"loader@triangular":{templateProvider:["$templateRequest","triLayout",function(e,t){if(angular.isDefined(t.layout.loaderTemplateUrl))return e(t.layout.loaderTemplateUrl)}],controllerProvider:["triLayout",function(e){return e.layout.loaderController}],controllerAs:"loader"}}})}e.$inject=["$stateProvider"],angular.module("triangular").config(e)}(),function(){"use strict";angular.module("app.translate",["pascalprecht.translate","LocalStorageModule"])}(),function(){"use strict";function e(e,t,n){var a=[{name:"Chinese",key:"zh"},{name:"English",key:"en"},{name:"French",key:"fr"},{name:"Portuguese",key:"pt"},{name:"Spanish",key:"pt"}];e.useLoader("$translatePartialLoader",{urlTemplate:"{part}/i18n/{lang}.json"}),t.addPart("app"),e.useSanitizeValueStrategy("sanitize"),e.useLoaderCache(!0);var r=[];for(var o in a)r.push(a[o].key),n.addLanguage({name:a[o].name,key:a[o].key});e.registerAvailableLanguageKeys(r,{en_US:"en",en_UK:"en"}).use("en"),e.useLocalStorage()}e.$inject=["$translateProvider","$translatePartialLoaderProvider","triSettingsProvider"],angular.module("app.translate").config(e)}(),function(){"use strict";angular.module("seed-module",[])}(),function(){"use strict";function e(e,t){e.state("triangular.seed-page",{url:"/seed-module/seed-page",templateUrl:"app/seed-module/seed-page.tmpl.html",controller:"SeedPageController",controllerAs:"vm",data:{layout:{contentClass:"layout-column"}}}),t.addMenu({name:"Seed Module",icon:"fa fa-tree",type:"dropdown",priority:1.1,children:[{name:"Start Page",state:"triangular.seed-page",type:"link"}]})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("seed-module").config(e)}(),function(){"use strict";function e(){this.testData=["triangular","is","great"]}angular.module("seed-module").controller("SeedPageController",e)}(),function(){"use strict";angular.module("app.permission",["permission","permission.ui"])}(),function(){"use strict";function e(e,t,n,a,r,o,i,s){function l(n,a,i,l){var c=e.repository.loggedUser;"triangular.account.login"!=a.name&&(o.displayInfo("No tiene los permisos necesarios para ingresar a esta opción"),r.removeCredentials(),s.location.href="/login"),c.role?"Administrador del sistema"===c.role?t.go("triangular.users-list"):t.go("triangular.home-admin"):t.go("401")}var c=["viewAdmin","viewUser","viewAnonymus","viewHidden","viewSystemAdmin","Semillas","Nutrientes","Mercados","Solidum"];n.defineManyPermissions(c,function(e){return r.hasPermission(e)}),a.defineManyRoles({"Administrador del sistema":["viewSystemAdmin","viewAdmin","Semillas","Nutrientes","Mercados","Solidum"],Administrativo:["viewAdmin","Semillas","Nutrientes","Mercados","Solidum"],Usuario:["viewUser"],Anonymus:["viewAnonymus"]});var u=e.$on("$stateChangePermissionDenied",l);e.$on("$destroy",function(){u()})}e.$inject=["$rootScope","$state","PermissionStore","RoleStore","membershipService","notificationService","triRoute","$window"],angular.module("app.permission").run(e)}(),function(){"use strict";angular.module("common.core",["ngRoute","ngCookies","base64","validator","ngAnimate","ghiscoding.validation"])}(),function(e){"use strict";function t(){function e(e,t){t&&(toastr.options.timeOut=t,setTimeout(function(){toastr.options.timeOut=3e3},100)),toastr.success(e)}function t(e,t){t&&(toastr.options.timeOut=t,setTimeout(function(){toastr.options.timeOut=3e3},100)),Array.isArray(e)?e.forEach(function(e){toastr.error(e)}):toastr.error(e)}function n(e,n){t(e.data.message?e.data.message:n)}function a(e,t){t&&(toastr.options.timeOut=t,setTimeout(function(){toastr.options.timeOut=3e3},100)),toastr.warning(e)}function r(e,t){t&&(toastr.options.timeOut=t,setTimeout(function(){toastr.options.timeOut=3e3},100)),toastr.info(e)}return toastr.options={debug:!1,positionClass:"toast-top-right",onclick:null,fadeIn:300,fadeOut:1e3,timeOut:3e3,extendedTimeOut:1e3},{displaySuccess:e,displayError:t,displayWarning:a,displayInfo:r,serverError:n}}e.factory("notificationService",t)}(angular.module("common.core")),function(e){"use strict";function t(e,t,n,a,r,o,i,s){function l(){var t=o.defer();if(v()){var n=sessionStorage.getItem("configParams");n?(r.contextConfig=JSON.parse(n),t.resolve()):e.get("api/config",null,function(e){r.contextConfig=e.data,sessionStorage.setItem("configParams",JSON.stringify(e.data)),t.resolve()},function(e){t.reject()})}else t.reject();return t.promise}function c(t,n,a){a||(a=g),e.post("/api/account",t,n,a)}function u(t,n){e.post("/api/account/register",t,n,h)}function d(e){var t=o.defer(),n=!1,a=r.repository.loggedUser,i=a?a.role:"Anonymus";if(s.hasRoleDefinition(i)){var l=s.getStore();if(angular.isDefined(l[i])&&-1!=l[i].validationFunction.indexOf(e)&&(n=!0),a&&("Semillas"==e||"Mercados"==e||"Solidum"==e||"Nutrientes"==e))if("Administrativo"==a.role||"Administrador del sistema"==a.role)n=!0;else{var c=_.map(a.enabledCompanies,function(e){return e.company}),u=_.filter(c,["name",e]);a.enabledCompanies&&a.enabledCompanies.length>0&&u&&u.length>0&&(n=!0)}}
return n?t.resolve():t.reject(),t.promise}function m(e){if(e.email&&e.password){var t=a.encode(e.email+":"+e.password);if(r.repository={loggedUser:{email:e.email,userId:e.userId,role:e.role.description,authdata:t,fullName:e.fullName,enabledCompanies:e.enabledCompanies,showNotifications:e.showNotifications}},e.rememberMe){var o={email:e.email,password:e.password,rememberMe:e.rememberMe};localStorage.setItem("alzagro-rememberedUser",JSON.stringify(o))}n.defaults.headers.common.Authorization="Basic "+t,localStorage.setItem("alzagro-repository",JSON.stringify(r.repository))}}function p(){var e=localStorage.getItem("alzagro-rememberedUser");return e?JSON.parse(e):null}function f(){r.repository={},localStorage.removeItem("alzagro-repository"),n.defaults.headers.common.Authorization=void 0}function g(e){t.displayError(e.data)}function h(e){t.displayError("No se ha realizado el registro. Intente nuevamente por favor.")}function v(){return null!=r.repository.loggedUser}var y={login:c,register:u,saveCredentials:m,removeCredentials:f,isUserLoggedIn:v,hasPermission:d,getRememberedUser:p,getConfigParams:l},b=!1,C=setInterval(function(){angular.equals({},r.contextConfig)&&!b?(b=!0,l().then(function(){clearInterval(C),b=!1}).catch(function(){b=!1})):clearInterval(C)},10);return y}t.$inject=["apiService","notificationService","$http","$base64","$rootScope","$q","$state","RoleStore"],e.factory("membershipService",t)}(angular.module("common.core")),function(e){"use strict";function t(e,t,n){function a(a,i,s,l){if(s)n.swal({title:"Eliminar elemento",text:"¿Desea eliminar este elemento?",type:"error",showCancelButton:!0,confirmButtonText:"CONFIRMAR",confirmButtonColor:"",cancelButtonColor:"",confirmButtonClass:"md-primary md-button md-alz-content-theme md-ink-ripple",cancelButtonClass:"md-button md-alz-content-theme md-ink-ripple cancel-color-text",cancelButtonText:"CANCELAR",width:"400px",padding:"90px"}).then(function(n){if(n)var o=!0;1==o&&e.remove("/api/"+a+"/"+s,function(){t.displaySuccess("El registro se ha eliminado con éxito."),l(r(i,s))})},function(){});else{var c=o(i);c&&n.swal({title:"Eliminar elemento",text:"¿Desea eliminar este elemento?",type:"error",showCancelButton:!0,confirmButtonText:"ACEPTAR",cancelButtonText:"CANCELAR",confirmButtonColor:"",cancelButtonColor:"",confirmButtonClass:"md-primary md-button md-alz-content-theme md-ink-ripple",cancelButtonClass:"md-button md-alz-content-theme md-ink-ripple cancel-color-text",width:"400px",padding:"100px"}).then(function(n){if(n)var o=!0;1==o&&e.remove("/api/"+a+"/"+c.id,function(){t.displaySuccess("El registro se ha eliminado con éxito."),l(r(i,c.id))})},function(){})}}function r(e,t){var n=0;return angular.forEach(e,function(e,a){e.id==t&&(n=a)}),n}function o(e){var t=[];return angular.forEach(e,function(e,n){e.selected&&t.push(e)}),t}function i(e,t,n){return{params:{page:t,pageSize:n,filter:e}}}function s(e,t){return{params:{baseFilter:e,filter:t}}}return{getFilter:i,getFilters:s,getSelected:o,getSelectedIndex:r,remove:a}}t.$inject=["apiService","notificationService","sweetAlert"],e.factory("listService",t)}(angular.module("common.core")),function(e){"use strict";function t(e,t,n,a,r){function o(t,n,o){for(var i=0;i<t.length;i++){var s=t[i];!function(t){e.upload[t]=a.upload({url:"/api/fileUpload//upload?entity="+n,method:"POST",file:s}).progress(function(e){}).success(function(e,t,n,a){r.displaySuccess(e.fileName+" se ha subido con éxito."),o(e)}).error(function(e,t,n,a){r.displayError(e.Message)})}(i)}}return e.upload=[],{uploadImage:o}}e.factory("fileUploadService",t),t.$inject=["$rootScope","$http","$timeout","$upload","notificationService"]}(angular.module("common.core")),function(e){"use strict";function t(e,t,n,a,r,o){function i(e,t,n,a){var t=isNaN(t=Math.abs(t))?2:t,n=void 0==n?".":n,a=void 0==a?",":a,r=parseFloat(e)<0?"-":"",o=String(parseInt(e=Math.abs(Number(e)||0).toFixed(t))),i=(i=o.length)>3?i%3:0;return r+(i?o.substr(0,i)+a:"")+o.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?n+Math.abs(e-o).toFixed(t).slice(2):"")}function s(e,t,n){angular.isUndefined(t)&&(t=!0),angular.isUndefined(n)&&(n=0);var a=e.toString();e=parseFloat(a);var r=String(e);if(!n){var i=r.indexOf(".");if(-1!=i){n=r.substr(i+1,r.length).length>1?2:1}}var s=o("currency")(e,"$",n).replace(/[,.]/g,function(e){return"."});return t?s:s.substr(2)}function l(){var t=a.defer();return r.syncStatuses?t.resolve():(r.syncStatuses=[],e.get("api/syncStatus",null,function(e){var n=_.orderBy(e.data.filter(function(e){return"Nuevo"!=e.description}),["description"],["asc"]);r.syncStatuses=n,t.resolve()},function(e){t.reject()})),t.promise}function c(e){var t=a.defer(),n=[];return n.push(e),m(n).then(function(n){d(e,"Rechazado",n).then(function(){t.resolve()}).catch(function(){t.reject()})}).catch(function(){t.reject()}),t.promise}function u(e,t){var n=a.defer();return d(e,"Aprobado",t).then(function(){n.resolve()}).catch(function(){n.reject()}),n.promise}function d(t,n,o){var i=a.defer(),s={id:t.id,syncStatus:_.head(_.filter(r.syncStatuses,["description",n])),ChangeStatusReason:o?o.reason:"",ChangeStatusNote:o?o.note:""};return e.post("api/expense/changeStatus",s,function(e){i.resolve()},function(e){i.reject()}),i.promise}function m(e){var t=a.defer(),o="";r.refusalReasons.forEach(function(e){o+='<option value="'+e.id+'">'+e.description+"</option>"});var i=setInterval(function(){var e=document.getElementById("notas").value;void 0!=e&&""!=e?swal.enableConfirmButton():swal.disableConfirmButton()},20),l="";if(e.length>1)l+="<p>Serán rechazados los "+e.length+" gastos seleccionados.</p><p>¿Está seguro?</p>";else{var c=s(e[0].total);l+="<h5>¿Está seguro de rechazar este gasto?</h5>",l+='<div class="swal-grid-container"><div class="swal-grid-item">Usuario</div><div class="swal-grid-item">'+e[0].user.fullName+'</div > <div class="swal-grid-item">Vendedor</div > <div class="swal-grid-item">'+e[0].provider+'</div > <div class="swal-grid-item">Categoría</div > <div class="swal-grid-item">'+e[0].category+'</div > <div class="swal-grid-item">Forma de pago</div > <div class="swal-grid-item">'+e[0].payment+'</div > <div class="swal-grid-item">Tipo de pago</div > <div class="swal-grid-item">'+e[0].paymentType+'</div > <div class="swal-grid-item">Monto</div > <div class="swal-grid-item">'+c+'</div > <div class="swal-grid-item">Fecha</div > <div class="swal-grid-item">'+moment(e[0].date).format("DD-MM-YYYY")+"</div > </div>"}return l+='<md-input-container class="md-alz-content-theme md-block md-input-has-placeholder sa-select-input margin-bottom-30 margin-top-40"><label for="reason" style="top:-24px;left:-40px;color: rgba(0,0,0,0.54);">Razón de rechazo</label><select class="swal2-select" id="reason" style="display: block;margin: 0 auto;border: none;color:black;padding-left: 0;border-bottom: 1px solid black;width: 70%;outline: none !important;">'+o+'</select></md-input-container><md-input-container class="md-alz-content-theme md-block md-input-has-placeholder" style="width: 70%;border: 0;margin: 0 auto;outline: 0;"><label for="notes" style="top:-24px;left: -32%;color: rgba(0,0,0,0.54);">Notas</label><textarea  ng-change="onInput()" class="swal2-textarea" id="notas" placeholder="" style="display: block;box-shadow: none;margin: 0;outline: 0;border: 0;border-bottom: 1px solid black;"></textarea></md-input-container>',n.swal({title:"Rechazar gasto"+(e.length>1?"s":""),type:"",showCancelButton:!0,confirmButtonText:"Rechazar",confirmButtonColor:"",cancelButtonColor:"",confirmButtonClass:"color-green md-button md-alz-content-theme md-ink-ripple",cancelButtonClass:"md-button md-alz-content-theme md-ink-ripple cancel-color-text",cancelButtonText:"CANCELAR",width:"400px",padding:"90px",html:l}).then(function(e){clearInterval(i);var e={note:document.getElementById("notas").value,reason:_.head(_.filter(r.refusalReasons,["id",Number(document.getElementById("reason").value)])).description};t.resolve(e)}).catch(function(e){t.reject()}),swal.disableConfirmButton(),t.promise}function p(e){var t=a.defer(),o="";r.approvalReasons.forEach(function(e){o+='<option value="'+e.id+'">'+e.description+"</option>"});var i=setInterval(function(){var e=document.getElementById("notas").value;void 0!=e&&""!=e?swal.enableConfirmButton():swal.disableConfirmButton()},20),l=s(e[0].total),c="<h5>Este gasto fue rechazado con anterioridad</h5>";return c+="<h5>¿Está seguro de aprobarlo?</h5>",c+='<div class="swal-grid-container"><div class="swal-grid-item">Usuario</div><div class="swal-grid-item">'+e[0].user.fullName+'</div > <div class="swal-grid-item">Vendedor</div > <div class="swal-grid-item">'+e[0].provider+'</div > <div class="swal-grid-item">Categoría</div > <div class="swal-grid-item">'+e[0].category+'</div > <div class="swal-grid-item">Forma de pago</div > <div class="swal-grid-item">'+e[0].payment+'</div > <div class="swal-grid-item">Tipo de pago</div > <div class="swal-grid-item">'+e[0].paymentType+'</div > <div class="swal-grid-item">Monto</div > <div class="swal-grid-item">'+l+'</div > <div class="swal-grid-item">Fecha</div > <div class="swal-grid-item">'+moment(e[0].date).format("DD-MM-YYYY")+"</div > </div>",c+='<md-input-container class="md-alz-content-theme md-block md-input-has-placeholder sa-select-input margin-bottom-30 margin-top-40"><label for="reason" style="top:-24px;left:-40px;color: rgba(0,0,0,0.54);">Razón de aprobación</label><select class="swal2-select" id="reason" style="display: block;margin: 0 auto;border: none;color:black;padding-left: 0;border-bottom: 1px solid black;width: 70%;outline: none !important;">'+o+'</select></md-input-container><md-input-container class="md-alz-content-theme md-block md-input-has-placeholder" style="width: 70%;border: 0;margin: 0 auto;outline: 0;"><label for="notes" style="top:-24px;left: -32%;color: rgba(0,0,0,0.54);">Notas</label><textarea  ng-change="onInput()" class="swal2-textarea" id="notas" placeholder="" style="display: block;box-shadow: none;margin: 0;outline: 0;border: 0;border-bottom: 1px solid black;"></textarea></md-input-container>',n.swal({title:"Aprobar gasto",type:"",showCancelButton:!0,confirmButtonText:"Aprobar",confirmButtonColor:"",cancelButtonColor:"",confirmButtonClass:"color-green md-button md-alz-content-theme md-ink-ripple",cancelButtonClass:"md-button md-alz-content-theme md-ink-ripple cancel-color-text",cancelButtonText:"CANCELAR",width:"400px",padding:"90px",html:c}).then(function(e){clearInterval(i);var e={note:document.getElementById("notas").value,reason:_.head(_.filter(r.approvalReasons,["id",Number(document.getElementById("reason").value)])).description};t.resolve(e)}).catch(function(e){t.reject()}),swal.disableConfirmButton(),t.promise}return{approve:u,reject:c,openRejectModal:m,openApproveModal:p,changeStatus:d,getSyncStatuses:l,formatFloat:s,formatMoney:i}}t.$inject=["apiService","notificationService","sweetAlert","$q","$rootScope","$filter"],e.factory("expenseService",t)}(angular.module("common.core")),function(e){"use strict";function t(e,t,n,a){function r(r,o,i,s){return e.get(r,o).then(function(e){i(e)},function(e){"401"==e.status?(t.displayError("Debe autenticarse para ingresar a esta opci&oacute;n."),n.previousState=a.is(),a.go("triangular.account-login")):null!=s?s(e):e.data?e.data.length>0&&e.data[0]?t.displayError(e.data):e.data.message?t.displayError(e.data.message):t.displayError("Se produjo un error inesperado."):t.displayError("Se produjo un error inesperado.")})}function o(r,o,i,s){return e.post(r,o).then(function(e){i(e)},function(e){"401"==e.status?(t.displayError("Debe autenticarse para ingresar a esta opci&oacute;n."),n.previousState=a.is(),a.go("triangular.account-login")):null!=s?s(e):e.data?e.data.length>0&&e.data[0]?t.displayError(e.data):e.data.message?t.displayError(e.data.message):t.displayError("Se produjo un error inesperado."):t.displayError("Se produjo un error inesperado.")})}function i(r,o,i){return e.delete(r).then(function(e){o(e)},function(e){"401"==e.status?(t.displayError("Debe autenticarse para ingresar a esta opci&oacute;n."),n.previousState=a.is(),a.go("triangular.account-login")):null!=i?i(e):e.data?e.data.length>0&&e.data[0]?t.displayError(e.data):e.data.message?t.displayError(e.data.message):t.displayError("Se produjo un error inesperado."):t.displayError("Se produjo un error inesperado.")})}return{get:r,post:o,remove:i}}e.factory("apiService",t),t.$inject=["$http","notificationService","$rootScope"]}(angular.module("common.core")),function(){"use strict";angular.module("app").value("googleChartApiConfig",{version:"1.1",optionalSettings:{packages:["line","bar","geochart","scatter"],language:"en"}})}(),function(){function e(e,t){function n(){e.go("triangular.account.login")}this.goHome=n}e.$inject=["$state","triRoute"],angular.module("app").controller("ErrorPageController",e)}(),function(){"use strict";function e(e,t,n){e.definePalette("white",{50:"ffffff",100:"ffffff",200:"ffffff",300:"ffffff",400:"ffffff",500:"ffffff",600:"ffffff",700:"ffffff",800:"ffffff",900:"ffffff",A100:"ffffff",A200:"ffffff",A400:"ffffff",A700:"ffffff",contrastDefaultColor:"dark"}),e.definePalette("black",{50:"e1e1e1",100:"b6b6b6",200:"8c8c8c",300:"646464",400:"3a3a3a",500:"e1e1e1",600:"e1e1e1",700:"232323",800:"1a1a1a",900:"121212",A100:"3a3a3a",A200:"ffffff",A400:"ffffff",A700:"ffffff",contrastDefaultColor:"light"}),e.definePalette("alz-toolbar-palette",{50:"E4E8EA",100:"BCC5CB",200:"909EA9",300:"647786",400:"42596C",500:"213C52",600:"1D364B",700:"182E41",800:"142738",900:"0B1A28",A100:"66ACFF",A200:"3390FF",A400:"0074FF",A700:"0068E6",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"],contrastLightColors:["A100"]}),e.definePalette("alz-sidebar-palette",{50:"E4E8EA",100:"BCC5CB",200:"909EA9",300:"647786",400:"42596C",500:"213C52",600:"1D364B",700:"182E41",800:"142738",900:"0B1A28",A100:"66ACFF",A200:"3390FF",A400:"0074FF",A700:"0068E6",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"],contrastLightColors:["50"]}),e.definePalette("alz-content-palette",{50:"E6F5FB",100:"C1E6F6",200:"98D6F0",300:"6FC5EA",400:"50B8E6",500:"31ACE1",600:"2CA5DD",700:"259BD9",800:"1F92D5",900:"1382CD",A100:"FCFEFF",A200:"C9E8FF",A400:"96D2FF",A700:"7DC7FF",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"],contrastLightColors:["A100"]});var a=e.extendPalette("cyan",{contrastDefaultColor:"light",contrastLightColors:"500 700 800 900",contrastStrongLightColors:"500 700 800 900"});e.definePalette("triCyan",a),t.theme("cyan").primaryPalette("triCyan").accentPalette("amber").warnPalette("deep-orange"),t.theme("cyan-white").primaryPalette("white").accentPalette("triCyan",{default:"500"}).warnPalette("deep-orange"),n.skin("cyan-cloud","Cyan Cloud").sidebarTheme("cyan").toolbarTheme("cyan-white").logoTheme("cyan").contentTheme("cyan"),t.theme("red").primaryPalette("red").accentPalette("amber").warnPalette("purple"),t.theme("white-red").primaryPalette("white").accentPalette("red",{default:"500"}).warnPalette("purple"),n.skin("red-dwarf","Red Dwarf").sidebarTheme("red").toolbarTheme("white-red").logoTheme("red").contentTheme("red"),t.theme("purple").primaryPalette("purple").accentPalette("deep-orange").warnPalette("amber"),t.theme("white-purple").primaryPalette("white").accentPalette("purple",{default:"400"}).warnPalette("deep-orange"),n.skin("plumb-purple","Plumb Purple").sidebarTheme("purple").toolbarTheme("white-purple").logoTheme("purple").contentTheme("purple"),t.theme("dark").primaryPalette("black",{default:"300","hue-1":"400"}).accentPalette("amber").warnPalette("deep-orange").backgroundPalette("black").dark(),n.skin("dark-knight","Dark Knight").sidebarTheme("dark").toolbarTheme("dark").logoTheme("dark").contentTheme("dark"),t.theme("blue-grey").primaryPalette("blue-grey").accentPalette("amber").warnPalette("orange"),t.theme("white-blue-grey").primaryPalette("white").accentPalette("blue-grey",{default:"400"}).warnPalette("orange"),n.skin("battleship-grey","Battleship Grey").sidebarTheme("blue-grey").toolbarTheme("white-blue-grey").logoTheme("blue-grey").contentTheme("blue-grey"),t.theme("orange").primaryPalette("orange",{default:"800"}).accentPalette("lime").warnPalette("amber"),t.theme("white-orange").primaryPalette("white").accentPalette("orange",{default:"500"}).warnPalette("lime"),n.skin("zesty-orange","Zesty Orange").sidebarTheme("orange").toolbarTheme("white-orange").logoTheme("orange").contentTheme("orange"),t.theme("indigo").primaryPalette("indigo",{default:"600"}).accentPalette("red").warnPalette("lime"),n.skin("indigo-island","Indigo Island").sidebarTheme("indigo").toolbarTheme("indigo").logoTheme("indigo").contentTheme("indigo"),t.theme("light-green").primaryPalette("light-green",{default:"400"}).accentPalette("amber").warnPalette("deep-orange"),t.theme("white-light-green").primaryPalette("white").accentPalette("light-green",{default:"800"}).warnPalette("deep-orange"),n.skin("kermit-green","Kermit Green").sidebarTheme("light-green").toolbarTheme("white-light-green").logoTheme("light-green").contentTheme("light-green"),t.theme("alz-sidebar").primaryPalette("alz-sidebar-palette",{default:"500"}).accentPalette("white",{default:"500","hue-1":"300"}).warnPalette("light-blue"),t.theme("alz-toolbar").primaryPalette("white",{default:"500","hue-1":"100","hue-2":"600","hue-3":"A100"}).accentPalette("alz-content-palette",{default:"500"}).warnPalette("white"),t.theme("alz-content").primaryPalette("alz-content-palette",{default:"400"}).accentPalette("blue",{default:"700"}).warnPalette("light-blue"),n.skin("skin-alz-alzagro","skin-alz-alzagro").sidebarTheme("alz-sidebar").toolbarTheme("alz-toolbar").logoTheme("alz-sidebar").contentTheme("alz-content"),n.useSkinCookie(!0),n.setSkin("skin-alz-alzagro")}e.$inject=["$mdThemingProvider","triThemingProvider","triSkinsProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t){var n=new Date;e.setName("AlzAgro"),e.setCopyright("&copy;"+n.getFullYear()+"<a href=''>AlzAgro S.R.L</a>. Todos los derechos reservados."),e.setLogo("../Content/images/header-menu.png"),e.setVersion("1.0.0"),t.setTitle("AlzAgro"),t.setSeparator("|")}e.$inject=["triSettingsProvider","triRouteProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e){e.setDefaultOption("loaderTemplateUrl","../Scripts/app/layouts/loader/loader.tmpl.html"),e.setDefaultOption("loaderController","LoaderController"),e.setDefaultOption("sidebarLeftTemplateUrl","../Scripts/app/layouts/leftsidenav/leftsidenav.tmpl.html"),e.setDefaultOption("sidebarLeftController","LeftSidenavController"),e.setDefaultOption("sidebarRightTemplateUrl","../Scripts/app/layouts/rightsidenav/rightsidenav.tmpl.html"),e.setDefaultOption("sidebarRightController","RightSidenavController"),e.setDefaultOption("toolbarTemplateUrl","../Scripts/app/layouts/toolbar/toolbar.tmpl.html"),e.setDefaultOption("toolbarController","ToolbarController"),e.setDefaultOption("footerTemplateUrl","../Scripts/app/layouts/footer/footer.tmpl.html"),e.setDefaultOption("toolbarSize","default"),e.setDefaultOption("toolbarShrink",!1),e.setDefaultOption("toolbarClass",""),e.setDefaultOption("contentClass",""),e.setDefaultOption("sideMenuSize","icon"),e.setDefaultOption("showToolbar",!0),e.setDefaultOption("footer",!1)}e.$inject=["triLayoutProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t,n){e.state("404",{url:"/login",templateUrl:"Scripts/app/views/account/login/login.tmpl.html",controller:"LoginCtrl",controllerAs:"vm",data:{layout:{showToolbar:!1,toolbarShrink:!0,toolbarClass:"none",contentClass:"layout-column",sideMenuSize:"off",footer:!0}}}).state("401",{url:"/login"}).state("500",{url:"/login",templateUrl:"Scripts/app/views/account/login/login.tmpl.html",controller:"LoginCtrl",controllerAs:"vm",data:{layout:{showToolbar:!1,toolbarShrink:!0,toolbarClass:"none",contentClass:"layout-column",sideMenuSize:"off",footer:!0}}}),n.html5Mode({enabled:!0,requireBase:!1}),t.otherwise(function(e,t){var n=localStorage.getItem("repository")||null,a=n?JSON.parse(n):null;return n&&a&&Object.keys(a.loggedUser).length>0?"/home":"/login"})}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e){e.setOptions({colours:["#7BA529","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0"],responsive:!0})}e.$inject=["ChartJsProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t,n,a,r,o){function i(){e.currentSelectedCompanyName=_.head(_.filter(e.companies,["id",e.currentSelectedCompany])).description;var t=document.getElementsByTagName("html")[0];if(window.CSS&&window.CSS.supports&&window.CSS.supports("--fake-var",0))switch(e.currentSelectedCompanyName){case"Semillas":t.style.setProperty("--currentCompanyColor","#7BA529");break;case"Nutrientes":t.style.setProperty("--currentCompanyColor","#F3C330");break;case"Mercados":t.style.setProperty("--currentCompanyColor","#AF4D42");break;case"Solidum":t.style.setProperty("--currentCompanyColor","#AF9442")}}function s(){a.displayError("No tiene los permisos para ingresar a esa opción."),t.go("triangular.account.login")}var l=localStorage.getItem("alzagro-repository"),c=localStorage.getItem("currentSelectedCompany");e.repository=l?JSON.parse(l):{},e.contextConfig={},e.currentSelectedCompany=c?JSON.parse(c):1,e.onKeyDown=function(t){e.$broadcast("onKeyDown",t.keyCode)},e.companies=[{id:1,description:"Semillas"},{id:2,description:"Nutrientes"},{id:3,description:"Mercados"},{id:4,description:"Solidum"}],i(),e.$on("ContextChanged",function(n,a){localStorage.setItem("currentSelectedCompany",a),"ExpenseDetailsController"===t.current.controller&&t.go("triangular.expenses-list"),e.currentSelectedCompany=a,i();var o=angular.copy(r.menu);r.removeAllMenu(),o.forEach(function(e){void 0!=e.contextVariable&&(e.active=e.contextVariable==a),r.addMenu(e)})}),e.repository.loggedUser?n.defaults.headers.common.Authorization=e.repository.loggedUser.authdata:t.go("triangular.account.login");var u=e.$on("$stateChangeError",s);e.$on("$destroy",function(){u()})}e.$inject=["$rootScope","$state","$http","notificationService","triMenu","$window"],angular.module("app").run(e).constant("ENV",{decimalQuantities:1})}(),function(){"use strict";function e(e,t,n,a,r,o,i){i.decorator("ivhTreeviewCheckboxDirective",["$delegate",function(e){return e.shift(),e}]),o.message="Cargando ...",o.requestFilter=function(e){if(e.url.match(/((api\/expense\/list)|updateLastActivityDateTime|fileUpload|.css|.html|.js|(api\/notifications\/search)|(api\/notifications\/getUnreadNumber))/))return!1},n.useStaticFilesLoader({prefix:"Content/vendors/angular-directives/ghiscoding.angular-validation/locales/validation/",suffix:".json"}),n.useSanitizeValueStrategy("sanitizeParameters"),n.preferredLanguage("es"),a.formatDate=function(e){if(e){var t=moment(e);return t.isValid()?t.format("DD/MM/YYYY"):""}return""},a.parseDate=function(e){toastr.clear();var t=moment(e,"DD/MM/YYYY",!0);return t.isValid()?t.toDate():(toastr.options={debug:!1,positionClass:"toast-top-right",onclick:null,fadeIn:300,fadeOut:500,timeOut:3e3,extendedTimeOut:5e3,preventOpenDuplicates:!0,preventDuplicates:!0,maxOpened:0},toastr.error("La fecha ingresada es inválida. El formato aceptado es DD/MM/AAAA."),new Date(NaN))},r.disableWarnings(),t.preAssignBindingsEnabled(!0),e.errorOnUnhandledRejections(!1)}e.$inject=["$qProvider","$compileProvider","$translateProvider","$mdDateLocaleProvider","$mdAriaProvider","blockUIConfig","$provide"],angular.module("app").config(e)}();